(globalThis.webpackChunksen_farming_v2=globalThis.webpackChunksen_farming_v2||[]).push([["node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-f87083","node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive"],{90571:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=90571,e.exports=t},98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>p,default:()=>h});var n,r,a,i,l,o,d,c=s(92950);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},u.apply(this,arguments)}function m(e,t){let{title:s,titleId:m,...p}=e;return c.createElement("svg",u({width:96,height:96,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":m},p),s?c.createElement("title",{id:m},s):null,n||(n=c.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0H72C85.2548 0 96 10.7452 96 24V72C96 85.2548 85.2548 96 72 96H24C10.7452 96 0 85.2548 0 72V24Z",fill:"url(#paint0_linear_3080_6014)"})),r||(r=c.createElement("path",{d:"M73.9637 43.986H75.6542C75.7684 43.986 77.2305 43.9392 76.4538 41.8327C75.6314 39.6326 73.0727 39.4922 73.0727 39.4922L69.189 25.0512C69.189 25.0512 68.7092 22.5 66.2648 22.5C63.7975 22.5 43.351 22.5 43.351 22.5C43.351 22.5 40.1983 22.5702 40.1983 26.1278H43.1682L39.6501 39.7028H36.1776V32.4472C36.1776 32.4472 36.1547 29.9897 33.7103 29.9897C31.243 29.9897 30.4434 29.9897 30.4434 29.9897L31.4486 32.6345H33.0935C33.0935 32.6345 33.1163 32.6345 33.1391 32.6345C33.2762 32.6345 33.6874 32.7047 33.6874 33.5239C33.6874 34.5069 33.6874 39.7731 33.6874 39.7731H22.5618C22.5618 39.7731 22.5618 39.7731 22.5389 39.7731C22.242 39.7731 18.541 39.8433 18.541 43.6583C18.541 47.6372 19.2492 54.6588 19.2492 54.6588C16.6906 56.5312 15 59.6207 15 63.1315C15 68.8658 19.5462 73.5 25.1433 73.5C30.7404 73.5 35.2866 68.8424 35.2866 63.1081C35.2866 60.791 34.5327 58.6377 33.2762 56.9057H37L37.7996 59.0824H45.9553L46.6636 56.8121L49.5192 56.8355C49.5192 57.0227 49.5192 57.1866 49.5192 57.3738C49.5192 66.2678 56.5556 73.5 65.2596 73.5C73.9408 73.5 81 66.2912 81 57.3738C80.9543 51.8034 78.1672 46.8883 73.9637 43.986ZM25.1661 68.5615C22.1963 68.5615 19.7747 66.0805 19.7747 63.0379C19.7747 59.9952 22.1963 57.5142 25.1661 57.5142C28.136 57.5142 30.5576 59.9952 30.5576 63.0379C30.5805 66.0805 28.1589 68.5615 25.1661 68.5615ZM57.6293 27.1108C57.6293 26.9704 57.6521 26.2448 58.2004 25.7065C58.4517 25.4491 58.8858 25.1448 59.6168 25.1448H65.8764C66.1277 25.1448 67.4299 25.2618 67.8868 27.3683C68.2295 28.8896 70.1028 36.941 70.1713 37.2921C70.217 37.4793 70.4226 38.4156 69.8744 39.1645C69.6231 39.5156 69.1205 39.9135 68.2066 39.9135H59.6168C58.8172 39.9135 57.6521 39.3752 57.6521 37.8772V27.1108H57.6293ZM44.6989 40.0071C44.676 40.0071 44.6532 40.0071 44.6303 40.0071C44.5389 40.0071 43.648 39.9135 43.1225 39.1879C42.8712 38.8603 42.6199 38.2985 42.8027 37.4325C43.0997 36.0282 45.0187 26.7129 45.0415 26.6193C45.0415 26.5959 45.0415 26.5725 45.0644 26.5257C45.2243 26.0108 45.7954 25.1448 46.9605 25.1448H54.4309C55.1848 25.1448 56.3956 25.7065 56.3956 27.181V38.1815C56.3956 38.2049 56.3956 38.2283 56.3956 38.2283C56.3499 38.9305 55.8017 39.9837 54.4538 39.9837H44.6989V40.0071ZM65.2596 68.07C59.5711 68.07 54.9335 63.3187 54.9335 57.4908C54.9335 51.6629 59.5711 46.9117 65.2596 46.9117C70.9481 46.9117 75.5857 51.6629 75.5857 57.4908C75.5857 63.3187 70.9481 68.07 65.2596 68.07Z",fill:"#212433"})),a||(a=c.createElement("path",{opacity:.5,d:"M69.8741 39.1648C69.6228 39.5158 69.1202 39.9137 68.2064 39.9137H59.6166C58.817 39.9137 57.6519 39.3754 57.6519 37.8775V27.1111C57.6519 26.9706 57.6747 26.2451 58.223 25.7067C58.4743 25.4493 58.9083 25.145 59.6394 25.145H65.899C66.1503 25.145 67.4525 25.262 67.9094 27.3685C68.2521 28.8899 70.1254 36.9413 70.1939 37.2923C70.2168 37.503 70.4224 38.4392 69.8741 39.1648Z",fill:"#212433"})),i||(i=c.createElement("path",{opacity:.5,d:"M56.3955 27.181V38.1815C56.3955 38.2049 56.3955 38.2283 56.3955 38.2283C56.3498 38.9304 55.8015 39.9837 54.4537 39.9837H44.6987C44.6759 39.9837 44.653 39.9837 44.6302 39.9837C44.5388 39.9837 43.6479 39.89 43.1224 39.1645C42.8711 38.8368 42.6198 38.2751 42.8026 37.4091C43.0996 36.0048 45.0186 26.6895 45.0414 26.5959C45.0414 26.5725 45.0414 26.5491 45.0643 26.5022C45.2242 25.9873 45.7953 25.1213 46.9604 25.1213H54.4308C55.1847 25.1447 56.3955 25.7065 56.3955 27.181Z",fill:"#212433"})),l||(l=c.createElement("path",{opacity:.5,d:"M65.2597 47.7777C60.051 47.7777 55.8018 52.1311 55.8018 57.4675C55.8018 62.8039 60.051 67.1572 65.2597 67.1572C70.4684 67.1572 74.7176 62.8039 74.7176 57.4675C74.7176 52.1311 70.4684 47.7777 65.2597 47.7777ZM65.2597 62.4294C62.5868 62.4294 60.4393 60.2059 60.4393 57.4909C60.4393 54.7525 62.6096 52.5524 65.2597 52.5524C67.9326 52.5524 70.08 54.7759 70.08 57.4909C70.08 60.2059 67.9097 62.4294 65.2597 62.4294Z",fill:"#212433"})),o||(o=c.createElement("path",{opacity:.5,d:"M25.1662 58.3801C22.6761 58.3801 20.6428 60.4632 20.6428 63.0144C20.6428 65.5655 22.6761 67.6486 25.1662 67.6486C27.6563 67.6486 29.6896 65.5655 29.6896 63.0144C29.7124 60.4632 27.6792 58.3801 25.1662 58.3801ZM25.1662 65.2847C23.9554 65.2847 22.9502 64.2782 22.9502 63.0144C22.9502 61.7739 23.9325 60.7441 25.1662 60.7441C26.377 60.7441 27.3822 61.7505 27.3822 63.0144C27.3822 64.2782 26.3998 65.2847 25.1662 65.2847Z",fill:"#212433"})),d||(d=c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_3080_6014",x1:0,y1:0,x2:96,y2:96,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#F0FF00"}),c.createElement("stop",{offset:1,stopColor:"#58CFFB"})))))}const p=c.forwardRef(m),h=s.p+"static/media/logo.63d520f68015fd3b429cce87badf4e5b.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return i.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return l.default}});var n=o(s(70854)),r=o(s(27803)),a=o(s(85468)),i=o(s(98463)),l=o(s(83272));function o(e){return e&&e.__esModule?e:{default:e}}const d=[n.default,r.default,a.default];t.h0=d},57527:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Background:()=>Ws,Layout:()=>Vs,Page:()=>Ys,__esModule:()=>Gs.X$,logo:()=>Gs.jY,panels:()=>Gs.h0,readme:()=>Gs.ng});var n=s(92950),r=s(55754),a=s(2553),i=s(45055),l=s(32671),o=s(70457),d=s(43785),c=s(99370),u=s(66172),m=s(15817),p=s(95418),h=s(27906),x=s(4065);const y=(e,t,s)=>a.util.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(x.utilsBN.undecimalize(t,s))}:{amount:new h.BN(0),decimals:0,balance:0},j=e=>{const[t,s]=(0,n.useState)(""),r=(0,a.useWalletAddress)(),i=(e=>{const t=(0,a.useWalletBalance)(),s=(0,a.useWalletAddress)(),n=(0,a.useAccounts)(),{amount:r,mint:i}=n[e]||{},l=(0,a.useMintDecimals)({mintAddress:i})||0;return a.util.isAddress(s)&&a.util.isAddress(e)?e===s?y(p.DEFAULT_EMPTY_ADDRESS,new h.BN(t.toString()),9):y(i,r?new h.BN(r.toString()):new h.BN(0),l):y()})(t);return(0,n.useEffect)((()=>{(async()=>{if(!a.util.isAddress(r)||!a.util.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const n=await t.deriveAssociatedAddress(r,e);s(n)}catch(n){return s("")}})()})),i};var f=s(45263);const g=e=>{let{mintAddress:t,format:s="0,0.[0000]"}=e;const{amount:n}=j(t.toString());return(0,f.jsx)(m.Z,{mintAddress:t,amount:n,formatter:s})},w=(0,n.memo)(g),b=e=>{let{reward:t,index:s,onDelete:r,onChange:i}=e;const{mints:m}=(()=>{const[e,t]=(0,n.useState)([]),s=(0,n.useCallback)((async()=>{const e=new a.SplTokenProvider,s=(await e.getTokenList()).map((e=>{let{address:t}=e;return t}));return t(s)}),[]);return(0,n.useEffect)((()=>{s()}),[s]),{mints:e}})();return(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Row,{align:"middle",children:[(0,f.jsx)(l.Col,{flex:"auto",children:(0,f.jsxs)(l.Typography.Text,{children:["Token #",s+1]})}),0!==s&&(0,f.jsx)(l.Col,{children:(0,f.jsx)(l.Button,{onClick:()=>r(s),type:"text",icon:(0,f.jsx)(d.default,{name:"trash-outline"})})})]})}),(0,f.jsx)(l.Col,{span:12,children:(0,f.jsx)(o.Z,{value:t.mintAddress,mints:m,style:{...J,textAlign:"left"},onChange:e=>i(s,{...t,mintAddress:e})})}),(0,f.jsx)(l.Col,{span:12,children:(0,f.jsx)(l.Input,{value:t.budget,style:{height:40},placeholder:"Enter budget",name:"budget",onChange:e=>i(s,{...t,budget:e.target.value})})}),u.util.isAddress(t.mintAddress)&&(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Typography.Text,{type:"secondary",children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,f.jsx)(w,{mintAddress:t.mintAddress}),(0,f.jsx)(c.Z,{mintAddress:t.mintAddress})]})})})]})},C=e=>{let{tokenRewards:t,setTokenRewards:s}=e;const n=e=>{const n=[...t];return n.splice(e,1),s(n)},r=(e,n)=>{const r=[...t],a={...r[e]};return r[e]={...a,...n},s(r)};return(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Typography.Title,{level:5,children:"Rewards"})}),t.map(((e,t)=>(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(b,{onChange:r,reward:e,index:t,onDelete:n})},t))),(0,f.jsx)(l.Col,{span:24}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Button,{size:"large",icon:(0,f.jsx)(d.default,{name:"add-outline"}),type:"dashed",block:!0,onClick:()=>{const e=[...t];return e.push(_),s(e)},children:"Add more"})})]})};let A;!function(e){e.Sentre="sentre",e.Staked="staked",e.Your="your",e.All="all"}(A||(A={}));let T;!function(e){e.All="All",e.Staked="Staked Farms",e.Your="Your Farms",e.Expired="Expired Farms",e.Upcoming="Upcoming Farms"}(T||(T={}));const v="MMM DD, YYYY HH:mm",S=new h.BN(10**9);var k=s(4550),B=s.n(k);const N=e=>{let{time:t,onChange:s}=e;return(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{span:12,children:(0,f.jsxs)(l.Space,{direction:"vertical",style:{width:"100%"},children:[(0,f.jsx)(l.Typography.Text,{children:"Start time"}),(0,f.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,f.jsx)(d.default,{name:"time-outline"}),className:"date-option",onChange:e=>s("startAt",(null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:t.startAt?B()(t.startAt):B()(Date.now()),showTime:{showSecond:!1},placement:"bottomRight",format:v,disabledDate:e=>e<B()().startOf("day")})]})}),(0,f.jsx)(l.Col,{span:12,children:(0,f.jsxs)(l.Space,{direction:"vertical",style:{width:"100%"},children:[(0,f.jsx)(l.Typography.Text,{children:"End time"}),(0,f.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,f.jsx)(d.default,{name:"time-outline"}),className:"date-option",onChange:e=>s("endAt",(null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:t.endAt?B()(t.endAt):void 0,showTime:{showSecond:!1},placement:"bottomRight",format:v,disabledDate:e=>e<B()().startOf("day")})]})})]})};var M=s(66073);const F=e=>{let{onSelect:t,mintAddress:s}=e;const[r,a]=(0,n.useState)(!1),{nftInfo:i,metadata:o}=(0,M.useNftMetaData)(s||"");return(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(l.Button,{onClick:()=>a(!0),size:"large",type:"text",className:"btn-nft",block:!0,children:(0,f.jsxs)(l.Row,{gutter:[8,8],wrap:!1,children:[(0,f.jsx)(l.Col,{flex:"auto",style:{textAlign:"left"},children:s?(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(M.AvatarNFT,{size:24,mintAddress:s}),(0,f.jsx)(l.Typography.Text,{children:(null===i||void 0===i?void 0:i.name)||(null===o||void 0===o?void 0:o.data.data.name)})]}):"Select a collection"}),(0,f.jsx)(l.Col,{children:(0,f.jsx)(d.default,{name:"chevron-down-outline"})})]})}),(0,f.jsx)(l.Modal,{className:"modal-nft-selection",visible:r,footer:!1,onCancel:()=>a(!1),closeIcon:(0,f.jsx)(d.default,{name:"close-outline"}),children:(0,f.jsxs)(l.Row,{gutter:[24,24],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Typography.Title,{level:4,children:"Select a NFT collection"})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(M.SearchNFT,{onSelect:e=>(e=>{t(e),a(!1)})(e),searchNFTby:M.searchNFTType.collections})})]})})]})},R=e=>{let{index:t,onDelete:s,boostData:n,onChange:r}=e;const a=n.percentage?n.percentage:void 0;return(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Row,{align:"middle",children:[(0,f.jsx)(l.Col,{flex:"auto",children:(0,f.jsxs)(l.Typography.Text,{children:["NFT Collection #",t+1]})}),0!==t&&(0,f.jsx)(l.Col,{children:(0,f.jsx)(l.Button,{onClick:()=>s(t),type:"text",icon:(0,f.jsx)(d.default,{name:"trash-outline"})})})]})}),(0,f.jsx)(l.Col,{span:12,children:(0,f.jsx)(F,{mintAddress:n.collection,onSelect:e=>r(t,{...n,collection:e})})}),(0,f.jsx)(l.Col,{span:12,className:"boost-nft",children:(0,f.jsx)(l.InputNumber,{value:a,style:{height:40},placeholder:"Enter boost rate",name:"budget",onChange:e=>r(t,{...n,percentage:e})})})]})},D={collection:"",percentage:0},z=()=>(0,f.jsxs)(l.Typography.Text,{className:"caption",type:"secondary",children:["Enabling ",(0,f.jsx)("span",{style:{color:"#A0E86F"},children:"Boost"})," means you allow users to lock their NFTs to earn extra rewards. You need to set a boost rate for every NFT collection you will use as Boosters."]}),E=e=>{let{boostsData:t,onChange:s}=e;const[r,a]=(0,n.useState)(!1),i=e=>{const n=[...t];return n.splice(e,1),s(n)},o=(e,n)=>{const r=[...t],a={...r[e]};return r[e]={...a,...n},s(r)};return(0,f.jsxs)(l.Row,{gutter:[12,12],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{flex:"auto",children:(0,f.jsx)(l.Typography.Title,{level:5,children:"Boost by NFT"})}),(0,f.jsx)(l.Col,{children:(0,f.jsx)(l.Switch,{size:"small",onChange:e=>{s([D]),e||s([]),a(e)}})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(z,{})})]})}),r&&t.map(((e,t)=>(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(R,{onDelete:i,index:t,boostData:e,onChange:o})},t))),r&&(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Button,{size:"large",icon:(0,f.jsx)(d.default,{name:"add-outline"}),type:"dashed",block:!0,onClick:()=>{const e=[...t];return e.push(D),s(e)},children:"Add more"})})]})};const O={appId:"sen_farming_v2",url:"https://descartesnetwork.github.io/sen-farming-v2-app/index.js"},X={development:{...O},production:{...O}};var U=s(38073);const{metadata:{Metadata:H,MetadataData:Z}}=U.programs,L=new h.web3.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");const P=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"devnet";this._connection=void 0,this.findDataByOwnerGroupByCollection=async e=>{if(!a.util.isAddress(e))throw new Error("Invalid address!");const t=await H.findDataByOwner(this._connection,e);let s={};return t.forEach((e=>{e.collection&&(s[e.collection.key]=s[e.collection.key]?[...s[e.collection.key],e]:[e])})),s},this.findDataByOwner=async e=>{if(!a.util.isAddress(e))throw new Error("Invalid address!");return await H.findDataByOwner(this._connection,e)},this.getNftMetadata=async e=>{if(!a.util.isAddress(e))throw new Error("Invalid address!");return await H.findByMint(this._connection,e)},this.getListAccountNFTsBelongToCollection=async e=>await this._connection.getProgramAccounts(L,{commitment:"confirmed",filters:[{dataSize:679},{memcmp:{offset:368,bytes:e}}]}),this.isNftBelongsToCollection=async(e,t)=>{var s;return(null===(s=(await H.findByMint(this._connection,e)).data.collection)||void 0===s?void 0:s.key)===t},this._connection=new U.Connection(e,"confirmed")}},G={devnet:{node:"https://api.devnet.solana.com",senFarmingProgram:"6LaxnmWdYUAJvBJ4a1R8rrsvCRtaY7b43zKiNAU2k3Nx",metaplexNFT:new P(a.rpc)},testnet:{node:"https://api.testnet.solana.com",senFarmingProgram:"6LaxnmWdYUAJvBJ4a1R8rrsvCRtaY7b43zKiNAU2k3Nx",metaplexNFT:new P(a.rpc)},mainnet:{node:"https://api.mainnet-beta.solana.com",senFarmingProgram:"E6Vc9wipgm8fMXHEYwgN7gYdDbyvpPBUiTNy67zPKuF4",metaplexNFT:new P(a.rpc)}},I={manifest:X[a.env],sol:G[a.net]},{manifest:{appId:V}}=I,W=`/app/${V}`,Y=()=>{const{search:e,pathname:t}=(0,i.useLocation)(),s=(0,i.useHistory)(),r=(0,i.useParams)(),a=(0,n.useMemo)((()=>new URLSearchParams(e)),[e]),l=(0,n.useCallback)((e=>r[e]?r[e]:""),[r]),o=(0,n.useCallback)((e=>{const t=a.get(e);return t||""}),[a]),d=(0,n.useCallback)((()=>{const e={};a.forEach(((t,s)=>{e[s]=t}));return e}),[a]),c=(0,n.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=d();!1===n&&(t=Object.assign(r,t));const a=new URLSearchParams(t);a&&(e+=`?${a.toString()}`),s.push(`${W}${e}`)}),[d,s]);return{getQuery:o,getAllQuery:d,pushHistory:c,appRoute:W,pathname:t,getIdFromUrl:l}},{sol:{metaplexNFT:Q}}=I,K=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(a.util.explorer(t),"_blank")}),q=e=>window.notify({type:"error",description:e.message}),J={padding:"4px 12px",height:40,width:"100%",background:"#0A0A0A"},_={mintAddress:"",budget:""},$=()=>{const[e,t]=(0,n.useState)([_]),[s,r]=(0,n.useState)([]),[i,d]=(0,n.useState)(""),[c,u]=(0,n.useState)({startAt:0,endAt:0}),{initializeFarm:m,loading:p}=(()=>{const[e,t]=(0,n.useState)(!1),s=(0,a.useGetMintDecimals)(),{to:r}=(0,a.useAppRoute)(I.manifest.appId);return{initializeFarm:(0,n.useCallback)((async e=>{let{inputMint:n,startAt:a,endAt:i,tokenRewards:l,boostsData:o}=e;try{t(!0);const e=window.senFarming,d=window.senFarming.provider,c=new h.web3.PublicKey(n),u=(new Date).getTime();let m=0;a>u&&(m=Math.floor((a-u)/1e3));const p=Math.floor((i-u)/1e3);let y=h.web3.Keypair.generate();const{tx:j}=await e.initializeFarm({inputMint:c,startAfter:m+10,endAfter:p,sendAndConfirm:!1,farmKeypair:y}),f=new h.web3.Transaction;await Promise.all(o.map((async t=>{let{collection:s,percentage:n}=t;const{tx:r}=await e.pushFarmBoostingCollection({farm:y.publicKey,collection:s,coefficient:new h.BN(n/100*S.toNumber()),sendAndConfirm:!1});f.add(r)})));const g=new h.web3.Transaction;await Promise.all(l.map((async t=>{let{mintAddress:n,budget:r}=t;const a=await s({mintAddress:n});if(!a)throw new Error("Can't find mint decimals");const i=x.utilsBN.decimalize(r,a),{tx:l}=await e.pushFarmReward({farm:y.publicKey,rewardMint:n,rewardAmount:i,sendAndConfirm:!1});g.add(l)})));const w=[{tx:j,signers:[y]},{tx:f,signers:[]},{tx:g,signers:[]}],b=await d.sendAll(w);K("Initialize farm",b[0]),setTimeout((()=>{r(`/${y.publicKey}`)}),300)}catch(d){q(d)}finally{t(!1)}}),[s,r]),loading:e}})(),{pushHistory:y}=Y(),j=(0,n.useMemo)((()=>{if(!a.util.isAddress(i))return"Select input mint";if(!Number(c.endAt))return"Select end time";for(const t of e){if(!a.util.isAddress(t.mintAddress))return"Select reward mint";if(!Number(t.budget))return"Enter budget amount"}for(const e of s){if(!a.util.isAddress(e.collection))return"Select NFT collection";if(!Number(e.percentage))return"Enter NFT coefficient"}}),[s,i,c.endAt,e]);return(0,f.jsx)(l.Row,{justify:"center",children:(0,f.jsx)(l.Col,{xs:24,md:12,lg:10,children:(0,f.jsx)(l.Card,{bordered:!1,children:(0,f.jsxs)(l.Row,{gutter:[32,32],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Typography.Title,{level:4,children:"New Farm"})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Space,{direction:"vertical",style:{width:"100%"},children:[(0,f.jsx)(l.Typography.Title,{level:5,children:"Input"}),(0,f.jsx)(o.Z,{value:i,onChange:d,style:{...J,textAlign:"left"},placeholder:"Select LP token"})]})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(C,{tokenRewards:e,setTokenRewards:t})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(N,{time:c,onChange:(e,t)=>u({...c,[e]:t})})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(E,{onChange:r,boostsData:s})}),(0,f.jsx)(l.Col,{span:12,children:(0,f.jsx)(l.Button,{onClick:()=>y("/farms"),size:"large",ghost:!0,block:!0,children:"Cancel"})}),(0,f.jsx)(l.Col,{span:12,children:(0,f.jsx)(l.Button,{size:"large",type:"primary",onClick:async()=>{await m({inputMint:i,startAt:c.startAt,endAt:c.endAt,boostsData:s,tokenRewards:e})},block:!0,disabled:!!j,loading:p,children:j||"Add"})})]})})})})},ee=e=>{let{children:t}=e;return(0,f.jsx)(l.Row,{justify:"center",style:{paddingBottom:24},children:(0,f.jsx)(l.Col,{style:{maxWidth:1140,width:"100%"},children:t})})};var te=s(24331),se=s(68429);const ne=e=>(0,r.useSelector)((t=>t.farms[e])),re=e=>{const t=(e=>{const[t,s]=(0,n.useState)(""),r=(0,n.useCallback)((async()=>{if(!a.util.isAddress(e))return s("");const t=await window.senFarming.deriveAllPDAs({farm:e});return s(t.debt.toBase58())}),[e]);return(0,n.useEffect)((()=>{r()}),[r]),t})(e),{debts:{[t]:s}}=(0,r.useSelector)((e=>e));return s},ae=e=>{const t=(0,r.useSelector)((e=>e.rewards));return(0,n.useMemo)((()=>Object.values(t).filter((t=>t.farm.toBase58()===e))),[e,t])},ie=e=>{const t=re(e),s=(0,n.useCallback)((e=>{if(null===t||void 0===t||!t.leverage)return new h.BN(0);return e.mul(t.leverage).div(S)}),[null===t||void 0===t?void 0:t.leverage]),r=(0,n.useCallback)((e=>{if(null===t||void 0===t||!t.leverage)return new h.BN(0);return e.mul(S).div(t.leverage)}),[null===t||void 0===t?void 0:t.leverage]),a=(0,n.useCallback)(((e,t,s,n)=>{let r=new h.BN(e),a=new h.BN(s),i=new h.BN(n),l=new h.BN(t),o=new h.BN(S);return r.mul(a).add(i).mul(l).div(o)}),[]),i=(0,n.useCallback)(((e,s,n,r)=>{if(null===t||void 0===t||!t.debtAmount)return new h.BN(0);let a=new h.BN(e),i=new h.BN(n),l=new h.BN(r),o=new h.BN(s),d=new h.BN(S),c=new h.BN(t.debtAmount);return a.mul(i).add(l).mul(o).div(d).sub(c)}),[null===t||void 0===t?void 0:t.debtAmount]);return(0,n.useMemo)((()=>({deposit:s,withdraw:r,next_debt_amount:a,get_rewards:i})),[s,i,a,r])},le=e=>{const t=ne(e),s=(0,n.useCallback)((()=>t.endDate.sub(t.startDate)),[t.endDate,t.startDate]),r=(0,n.useCallback)((async()=>{let e=await(async()=>new h.BN((new Date).getTime()/1e3))(),n=s();return e.lte(t.startDate)?new h.BN(0):e.gte(t.endDate)?n:e.sub(t.startDate)}),[s,t.endDate,t.startDate]),a=(0,n.useCallback)((()=>{let e=s();return t.totalRewards.div(e)}),[s,t.totalRewards]),i=(0,n.useCallback)((e=>{let t=a();if(e.isZero()){return t.mul(S)}return t.mul(S).div(e)}),[a]),l=(0,n.useCallback)((()=>{let e=s(),t=i(new h.BN(0));return e.mul(t)}),[i,s]),o=(0,n.useCallback)(((e,s,n)=>{let r=new h.BN(0);if(s.gte(n)){let a=s.sub(n).mul(e);r=t.compensation.add(a)}else{let a=n.sub(s).mul(e);r=t.compensation.sub(a)}return r}),[t.compensation]);return(0,n.useMemo)((()=>({get_lifetime:s,get_time_passed:r,get_velocity:a,get_emission_rate:i,get_max_compenstation:l,next_compenstation:o})),[i,s,l,r,a,o])},oe=e=>{const t=re(e),s=ne(e),r=ie(e),a=le(e);return(0,n.useCallback)((async()=>{if(!t)return new h.BN(0);let e=t.shares,n=await a.get_time_passed(),i=a.get_emission_rate(s.totalShares),l=r.get_rewards(n,e,i,s.compensation);return t.pendingRewards.add(l)}),[t,r,s.compensation,s.totalShares,a])},de=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;const[s,r]=(0,n.useState)(new h.BN(0)),a=oe(e),i=ae(e),l=ne(e),o=re(e),d=(0,n.useCallback)((async()=>{const e=await a();r(e.div(new h.BN(10**9)))}),[a]);(0,n.useEffect)((()=>{if(t&&null!==o&&void 0!==o&&o.shares.gt(new h.BN(0))){const e=setInterval((()=>d()),t);return()=>clearInterval(e)}d()}),[null===o||void 0===o?void 0:o.shares,t,d]);const c=(0,n.useMemo)((()=>i.map((e=>({mint:e.rewardMint.toBase58(),amount:s.mul(e.totalRewards).mul(S).div(l.totalRewards)})))),[l.totalRewards,i,s]);return c};var ce=s(32083);const ue=()=>{const e=(0,r.useSelector)((e=>e.debts)),[t,{set:s}]=(0,te.Z)({}),i=(0,a.useWalletAddress)(),l=(0,n.useMemo)((()=>Object.values(e).filter((e=>e.authority.toBase58()===i&&!e.shares.isZero()))),[e,i]),o=Object.values(t).reduce(((e,t)=>e+t),0),d=Object.values(t).length===l.length;return(0,f.jsxs)("span",{children:[a.util.numeric(o).format("$0,0.[00]"),l.map((e=>(0,f.jsx)(pe,{farmAddress:e.farm.toBase58(),upset:s,msReload:d&&o?5e3:300},e.farm.toBase58())))]})},me=(0,n.memo)(ue),pe=(0,n.memo)((e=>{let{farmAddress:t,upset:s,msReload:r}=e;const a=de(t,r),i=(0,ce.B)(),l=(0,n.useCallback)((async()=>{let e=0;return await Promise.all(a.map((async t=>{const s=await i(t.mint,t.amount);e+=s}))),s(t,e)}),[a,t,i,s]);return(0,se.Z)(l,r),(0,f.jsx)(n.Fragment,{})}));var he=s(93253);const xe=s.p+"static/media/mining.c2bd06577dd01b9c351e.png";const ye=[s.p+"static/media/token-1.c55800e9fdf4d95e5b29c9e4e015b55c.svg",s.p+"static/media/token-2.4e32fd5955e9fc581eba7c754bef579e.svg"],je=()=>(0,f.jsx)("div",{className:"wrap-animation mining",children:ye.map(((e,t)=>(0,f.jsx)("div",{className:`item-bounce bounce-${t+1}`,children:(0,f.jsx)("img",{src:e,alt:`coin-${t}`})},t)))}),fe={color:"inherit"},ge={color:"#141413"},we=()=>{const e=(()=>{const e=(0,r.useSelector)((e=>e.farms)),[t,s]=(0,n.useState)(0),a=(0,ce.B)(),i=(0,n.useCallback)((async()=>{let t=0;return await Promise.all(Object.values(e).map((async e=>{let{totalShares:s,inputMint:n}=e;if(s.isZero())return;const r=await a(n.toString(),s);t+=r}))),s(t)}),[e,a]);return(0,he.Z)(i,500,[i]),t})(),t=(0,a.useInfix)()<a.Infix.sm,s=t?"center":"end",i=t?[24,24]:void 0;return(0,f.jsx)(l.Card,{className:"banner",bordered:!1,bodyStyle:{padding:"24px 32px"},children:(0,f.jsxs)(l.Row,{gutter:i,style:{...ge},justify:s,children:[(0,f.jsx)(l.Col,{xs:{order:2,span:24},sm:{order:1,span:24},children:(0,f.jsxs)(l.Row,{gutter:[24,24],justify:s,children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Typography.Title,{level:2,style:{...fe},children:"Sen Farming V2"})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Space,{size:64,children:[(0,f.jsxs)(l.Space,{direction:"vertical",children:[(0,f.jsx)(l.Typography.Text,{style:{...fe},children:"Total Value Locked"}),(0,f.jsx)(l.Typography.Title,{level:3,style:{...fe},children:a.util.numeric(e).format("$0,0.[00]")})]}),(0,f.jsxs)(l.Space,{direction:"vertical",children:[(0,f.jsx)(l.Typography.Text,{style:{...fe},children:"Your Total Rewards"}),(0,f.jsx)(l.Typography.Title,{level:3,style:{...fe},children:(0,f.jsx)(me,{})})]})]})})]})}),(0,f.jsx)(l.Col,{xs:{order:1},sm:{order:2},children:(0,f.jsx)("div",{className:"icon-banner",children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Image,{src:xe,preview:!1}),(0,f.jsx)(je,{})]})})})]})})},be=e=>{let{floatContent:t,children:s,align:n="middle",wrap:r=!0,gutter:a,style:i,childFlex:o}=e;return(0,f.jsxs)(l.Row,{gutter:a,align:n,wrap:r,children:[(0,f.jsx)(l.Col,{flex:"auto",style:{...i},children:s}),!!t&&(0,f.jsx)(l.Col,{flex:o,children:t})]})};var Ce=s(19289);let Ae;!function(e){e.ASC="ASC",e.DESC="DESC",e.null="null"}(Ae||(Ae={}));const Te="main",ve={searchKey:"",sortType:{liquidity:Ae.null,apr:Ae.ASC},farmTab:T.All,boostOnly:!1},Se=(0,Ce.createAsyncThunk)("main/setSearchKey",(async e=>({searchKey:e}))),ke=(0,Ce.createAsyncThunk)("main/setSort",(async e=>({sortType:e}))),Be=(0,Ce.createAsyncThunk)("main/setFarmTab",(async e=>({farmTab:e}))),Ne=(0,Ce.createAsyncThunk)("main/switchBoostOnly",(async(e,t)=>{let{getState:s}=t;const{main:{boostOnly:n}}=s();return{boostOnly:!n}})),Me=(0,Ce.createSlice)({name:Te,initialState:ve,reducers:{},extraReducers:e=>{e.addCase(Se.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ke.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ne.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Be.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Fe=()=>{const e=(0,r.useSelector)((e=>e.main.farmTab)),t=(0,r.useDispatch)();return(0,f.jsx)("div",{style:{overflowX:"auto"},children:(0,f.jsx)(l.Segmented,{options:[{value:T.All,label:T.All},{value:T.Staked,label:T.Staked},{value:T.Your,label:T.Your},{value:T.Expired,label:T.Expired},{value:T.Upcoming,label:T.Upcoming}],value:e,onChange:e=>t(Be(e.toString()))})})},Re=e=>{let{placeholder:t="Search by name, address"}=e;const s=(0,r.useDispatch)();return(0,f.jsxs)("div",{className:"search",children:[(0,f.jsx)(d.default,{name:"search-outline",className:"search-icon"}),(0,f.jsx)(l.Input,{bordered:!1,style:{width:"100%"},placeholder:t,onChange:e=>s(Se(e.target.value)),className:"search-content"})]})},De={ASC:{up:"#727272",down:"#F3F3F3"},DESC:{up:"#F3F3F3",down:"#727272"},null:{up:"#727272",down:"#727272"}},ze=e=>{let{type:t,onClick:s=(()=>{})}=e;const n=De[t];return(0,f.jsxs)(l.Space,{className:"btn-sort-direction",direction:"vertical",size:0,children:[(0,f.jsx)(l.Button,{type:"text",size:"small",style:{color:n.up},icon:(0,f.jsx)(d.default,{style:{fontSize:12},name:"caret-up-outline"}),onClick:()=>s(Ae.DESC)}),(0,f.jsx)(l.Button,{type:"text",size:"small",style:{color:n.down},icon:(0,f.jsx)(d.default,{style:{fontSize:12},name:"caret-down-outline"}),onClick:()=>s(Ae.ASC)})]})},Ee=()=>{const e=(0,r.useDispatch)(),t=(0,r.useSelector)((e=>e.main.sortType)),s=(0,r.useSelector)((e=>e.main.boostOnly)),n=s=>{if(s===t.liquidity)return;let n=Ae.ASC;t.liquidity!==Ae.DESC&&(n=Ae.DESC),s&&(n=s),e(ke({liquidity:n,apr:Ae.null}))},a=s=>{if(s===t.apr)return;let n=Ae.ASC;t.apr!==Ae.DESC&&(n=Ae.DESC),s&&(n=s),e(ke({liquidity:Ae.null,apr:n}))};return(0,f.jsxs)(l.Row,{gutter:[16,16],align:"middle",children:[(0,f.jsx)(l.Col,{children:(0,f.jsxs)(l.Space,{size:6,children:[(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Sort by:"}),(0,f.jsxs)(l.Space,{className:"space-middle-icon",children:[(0,f.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,background:"transparent"},onClick:()=>n(),children:"Liquidity"}),(0,f.jsx)(ze,{onClick:e=>n(e),type:t.liquidity})]}),(0,f.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,f.jsxs)(l.Space,{className:"space-middle-icon",children:[(0,f.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,background:"transparent"},onClick:()=>a(),children:"APR"}),(0,f.jsx)(ze,{onClick:e=>a(e),type:t.apr})]})]})}),(0,f.jsx)(l.Col,{children:(0,f.jsx)("label",{style:{cursor:"pointer"},children:(0,f.jsxs)(l.Space,{size:6,children:[(0,f.jsx)(l.Typography.Text,{style:{userSelect:"none"},children:"Boosted Only"}),(0,f.jsx)(l.Switch,{size:"small",checked:s,onChange:()=>e(Ne())})]})})})]})},Oe=()=>(0,f.jsxs)(l.Row,{gutter:[24,24],align:"middle",children:[(0,f.jsx)(l.Col,{xs:24,md:8,children:(0,f.jsx)(Re,{})}),(0,f.jsx)(l.Col,{flex:1,children:(0,f.jsx)(Ee,{})})]});var Xe=s(58421),Ue=s(48744),He=s.n(Ue);const Ze=e=>{const[t,s]=(0,n.useState)(0),{inputMint:r,totalShares:a}=ne(e),i=(0,ce.B)(),l=(0,n.useCallback)((async()=>{const e=await i(r.toString(),a);return s(e)}),[i,r,a]);return(0,n.useEffect)((()=>{l()}),[l]),t},Le=e=>{let{farmAddress:t}=e;const s=(e=>{const[t,s]=(0,n.useState)(0),r=Ze(e)||10,a=(0,ce.B)(),i=ae(e),l=le(e),o=(0,n.useCallback)((async()=>{if(!r)return s(0);let e=0;for(const t of i){const{rewardMint:s,totalRewards:n}=t,r=n.mul(new(He())(86400)).div(l.get_lifetime());e+=await a(s,r)}return s(e/r)}),[l,a,r,i]);return(0,n.useEffect)((()=>{o()}),[o]),356*t})(t);return(0,f.jsx)("span",{children:a.util.numeric(s).format("0,0.[00]%")})},Pe=e=>{let{farmAddress:t}=e;const s=Ze(t);return(0,f.jsx)("span",{children:a.util.numeric(s).format("$0,0.[00]a")})};var Ge=s(74939);const Ie=e=>{let{farmAddress:t}=e;const s=ae(t);return(0,f.jsx)(l.Space,{size:4,children:s.map((e=>(0,f.jsx)(Ge.Z,{mintAddress:e.rewardMint},e.rewardMint.toBase58())))})};var Ve=s(51518),We=s.n(Ve);const Ye=e=>{let{title:t="",address:s=""}=e;const[r,i]=(0,n.useState)(!1);return(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{span:10,children:(0,f.jsxs)(l.Space,{align:"baseline",children:[(0,f.jsx)(d.default,{style:{fontSize:16},name:"alert-circle-outline"}),(0,f.jsx)(l.Typography.Text,{children:t})]})}),(0,f.jsx)(l.Col,{span:12,children:(0,f.jsxs)(l.Typography.Text,{children:[s," "]})}),(0,f.jsx)(l.Col,{span:2,children:(0,f.jsx)(l.Tooltip,{title:"Copied",visible:r,children:(0,f.jsx)(We(),{text:s,children:(0,f.jsx)(l.Button,{style:{width:"auto",height:"auto",padding:0,background:"transparent"},type:"text",icon:(0,f.jsx)(d.default,{name:"copy-outline"}),onClick:async e=>{e.stopPropagation(),i(!0),await a.util.asyncWait(500),i(!1)}})})})})]})},Qe=e=>{let{farmAddress:t}=e;const[s,r]=(0,n.useState)(!1),a=ne(t);return(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(l.Button,{type:"text",style:{width:"auto",height:"auto",padding:0,background:"transparent"},onClick:()=>r(!0),icon:(0,f.jsx)(d.default,{name:"information-circle-outline",className:"icon-describe"})}),(0,f.jsx)(l.Modal,{visible:s,onCancel:()=>r(!1),footer:!1,closable:!1,children:(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(Ye,{title:"Farm Address:",address:t})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(Ye,{title:"Staked Mint Address:",address:a.inputMint.toBase58()})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Divider,{style:{margin:"12px 0"}})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:(0,f.jsx)(l.Typography.Text,{children:B()(a.startDate.toNumber()).format(v)}),children:(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Start Date"})})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:(0,f.jsx)(l.Typography.Text,{children:B()(a.endDate.toNumber()).format(v)}),children:(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"End Date"})})})]})})]})},Ke=e=>{let{farmAddress:t,size:s=44,textStyle:n,hoverable:r=!1,spacing:a=8}=e;const{inputMint:i}=ne(t)||{};return(0,f.jsxs)(l.Space,{size:12,children:[(0,f.jsx)(Ge.Z,{size:s,mintAddress:i}),(0,f.jsxs)(l.Space,{size:a,children:[(0,f.jsx)(l.Typography.Text,{style:{...n},children:(0,f.jsx)(c.Z,{mintAddress:i})}),r&&(0,f.jsx)(Qe,{farmAddress:t})]})]})},qe=e=>{let{farmAddress:t}=e;const[s,r]=(0,n.useState)(0),i=de(t,1e3),l=(0,ce.B)(),o=(0,n.useCallback)((async()=>{let e=0;return await Promise.all(i.map((async t=>{const s=await l(t.mint,t.amount);e+=s}))),r(e)}),[i,l]);return(0,n.useEffect)((()=>{o()}),[o]),(0,f.jsx)("span",{children:a.util.numeric(s).format("$0,0.[00]")})};var Je=s(45190);const _e=e=>{let{farmAddress:t}=e;const s=de(t);return s.length?(0,f.jsx)(l.Card,{bordered:!1,style:{background:"transparent"},bodyStyle:{padding:4},children:(0,f.jsx)(l.Row,{gutter:[8,8],children:(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Space,{direction:"vertical",style:{width:"100%"},children:s.map((e=>{let{mint:t,amount:s}=e;return(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Typography.Title,{level:5,children:[(0,f.jsx)(m.Z,{mintAddress:t,amount:s})," ",(0,f.jsxs)("span",{style:{color:"#A1A1A1"},children:["(",(0,f.jsx)(Je.Z,{mintAddress:t,amount:s}),")"]})]}),gutter:[24,24],children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(Ge.Z,{mintAddress:t}),(0,f.jsx)(c.Z,{mintAddress:t})]})},t)}))})})})}):(0,f.jsx)(l.Typography.Text,{children:"No Data."})},$e=e=>{let{farmAddress:t,lastSeparator:s="and",separator:r=","}=e;const a=ae(t),i=(0,n.useMemo)((()=>a.map((e=>{let{rewardMint:t}=e;return t.toBase58()}))),[a]);return(0,f.jsx)("span",{children:i.map(((e,t)=>{const a=2===i.length?s:r;return(0,f.jsxs)(n.Fragment,{children:[t>0&&` ${a} `," ",(0,f.jsx)(c.Z,{mintAddress:e})]},e)}))})},et=e=>{let{farmAddress:t,background:s="#2D2E2D",style:r,bodyStyle:a,bordered:i=!1,gutter:o=[12,12],titleHeight:d=41,size:u=24,align:p="top"}=e;const x=le(t),y=ae(t),j=(0,n.useMemo)((()=>y.map((e=>{const t=e.totalRewards.mul(new h.BN(604800)).div(x.get_lifetime());return{mint:e.rewardMint,amount:t,total:e.totalRewards}}))),[x,y]);return(0,f.jsx)(l.Card,{bordered:i,style:{height:"100%",background:s,...r},bodyStyle:{...a},children:(0,f.jsxs)(l.Row,{gutter:o,children:[(0,f.jsx)(l.Col,{children:(0,f.jsx)(be,{floatContent:(0,f.jsx)(l.Col,{span:24,style:{height:d}}),children:(0,f.jsx)(l.Typography.Text,{children:"Farm rewards"})})}),j.map(((e,t)=>{let{mint:s,amount:n,total:r}=e;return(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Space,{size:0,direction:"vertical",style:{textAlign:"right"},children:[(0,f.jsx)(l.Typography.Title,{level:5,children:(0,f.jsx)(m.Z,{mintAddress:s,amount:r,formatter:"0,0.[00]"})}),(0,f.jsxs)(l.Typography.Text,{type:"secondary",children:[(0,f.jsx)(m.Z,{mintAddress:s,amount:n,formatter:"0,0.[00]"})," / Week"]})]}),align:p,children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(Ge.Z,{size:u,mintAddress:s}),(0,f.jsx)(c.Z,{mintAddress:s})]})})},s.toBase58()+t)}))]})})},tt=e=>{let{farmAddress:t}=e;return(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(et,{background:"transparent",bodyStyle:{padding:4},farmAddress:t,gutter:[8,8],titleHeight:0,size:32,align:"middle"})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Divider,{style:{margin:4,borderColor:"#727272"}})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Typography.Text,{children:["To get ",(0,f.jsx)($e,{farmAddress:t})," rewards, you need to join the pool by participating in the liquidity offering. Rewards will be distributed weekly."]})})]})},st=e=>{let{farmAddress:t,size:s="middle"}=e;const{loading:r,harvest:a}=(e=>{const[t,s]=(0,n.useState)(!1);return{harvest:(0,n.useCallback)((async()=>{try{s(!0);const t=new h.web3.Transaction,{tx:n}=await window.senFarming.unstake({farm:e,sendAndConfirm:!1});t.add(n);const{tx:r}=await window.senFarming.stake({farm:e,sendAndConfirm:!1});t.add(r);const{tx:a}=await window.senFarming.claim({farm:e,sendAndConfirm:!1});t.add(a);const{tx:i}=await window.senFarming.convertRewards({farm:e,sendAndConfirm:!1}),l=window.senFarming.provider,o=await l.sendAll([{tx:t},{tx:i}]);K("Harvested",o[1])}catch(t){q(t)}finally{s(!1)}}),[e]),loading:t}})(t),[i,o]=(0,n.useState)(!0),d=de(t),c=(0,n.useCallback)((()=>{var e;const t=!(null!==(e=d[0])&&void 0!==e&&e.amount.isZero());o(!t)}),[d]);return(0,n.useEffect)((()=>{c()}),[c]),(0,f.jsx)(l.Button,{size:s,loading:r,onClick:e=>(e.stopPropagation(),a()),block:!0,type:"primary",disabled:i,children:"Harvest"})},nt=e=>{let{children:t,tooltip:s,...n}=e;return(0,f.jsx)(l.Tooltip,{title:s,...n,children:t})},rt={primary:"#a0e86f",warning:"#f0ff00"},at=e=>{let{type:t="primary",style:s,radius:r=6,children:a,bordered:i=!0,opacity:o=0,color:d}=e;const c=d||rt[t],u=i?{border:`1px solid ${c}`}:{border:"none"},m=(0,n.useMemo)((()=>{let e="transparent";return c.startsWith("rgb")&&(e=(e=>{const[t,s,n]=e.split(",");return`#16777216${Number(t)<<16}${Number(s)<<8}${n}`})(c)),c.startsWith("#")&&(e=((e,t)=>{const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?`rgb(${new Array(3).fill("").map(((e,t)=>parseInt(s[t+1],16))).join(",")}, ${t})`:e})(c,o)),{background:e}}),[o,c]);return(0,f.jsx)(l.Tag,{style:{color:c,borderColor:c,borderRadius:r,marginRight:0,...m,...u,...s},children:a})},it={xALGoH1zUfRmpCriy94qbfoMXHtK6NDnMKzT4Xdvgms:{balansol:{url:"https://hub.sentre.io/app/balansol/swap?bid_mint=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&ask_mint=xALGoH1zUfRmpCriy94qbfoMXHtK6NDnMKzT4Xdvgms&autoInstall=true",description:"Swap on Balansol",icon:"https://descartesnetwork.github.io/balansol/static/asset/logo.f98afe9edf28d217.png"},glitterfinance:{url:"https://bridge.glitterfinance.org/",description:"Bridge on Glitter Finances",icon:"https://bridge.glitterfinance.org/static/media/circles-anim.f512ffe5.svg",recommend:!0}},SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M:{balansol:{url:"https://hub.sentre.io/app/balansol/swap?bid_mint=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&ask_mint=SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M&autoInstall=true",description:"Swap on Balansol",icon:"https://descartesnetwork.github.io/balansol/static/asset/logo.f98afe9edf28d217.png",recommend:!0},gate:{url:"https://www.gate.io/trade/SNTR_USDT",description:"Buy on Gate.io",icon:"https://www.gate.io/favicon.ico?v=2.0"}},H2yaxdyK6bzUgse1QZTFPaiMif8DeQ2xRjdQomk21PA7:{balansol:{url:"https://hub.sentre.io/app/balansol/details?pool=AzPdQteHNWLvgRtFQX2N9K2U14M7rwub4VjEeKhaSbuh&autoInstall=true",description:"Deposit on Balansol",icon:"https://descartesnetwork.github.io/balansol/static/asset/logo.f98afe9edf28d217.png",recommend:!0}},"8zzV8kkfv9amN3UA3g4fKtDzd79td2krc3VMy5CZo275":{balansol:{url:"https://hub.sentre.io/app/balansol/details?pool=2gtDG2iYam6z4eCjx9yfBD7ayRXQGTDymjqQLiHqr7Z6&autoInstall=true",description:"Deposit on Balansol",icon:"https://descartesnetwork.github.io/balansol/static/asset/logo.f98afe9edf28d217.png",recommend:!0}}},lt=e=>{let{farmAddress:t}=e;const s=ne(t),n=it[s.inputMint.toBase58()];if(!n)return(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"No Data."});return(0,f.jsx)(l.Row,{gutter:[16,0],style:{maxWidth:380},onClick:e=>e.stopPropagation(),children:Object.keys(n).map((e=>{const t=n[e];return(0,f.jsx)(l.Col,{className:"recommend-get-tokens",span:24,onClick:e=>{((e,t)=>{if(null===t||void 0===t||t.stopPropagation(),e)window.open(e)})(t.url,e)},style:{paddingTop:8,paddingBottom:8},children:(0,f.jsx)(be,{floatContent:t.recommend&&(0,f.jsxs)(at,{children:[(0,f.jsx)(d.default,{name:"medal-outline"})," Recommended"]}),gutter:[12,12],children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Avatar,{src:t.icon,size:24,shape:"square"}),(0,f.jsx)(l.Typography.Text,{className:"get-token",children:t.description})]})})})}))})},ot=e=>{let{farmAddress:t}=e;const s=ne(t),n=it[s.inputMint.toBase58()];return(0,f.jsx)(nt,{tooltip:(0,f.jsx)(lt,{farmAddress:t}),visible:!!n&&void 0,children:(0,f.jsxs)(l.Space,{size:4,children:[(0,f.jsx)(l.Button,{onClick:e=>e.stopPropagation(),type:"text",style:{padding:0,background:"transparent"},disabled:!n,children:"Get tokens to stake"}),(0,f.jsx)(l.Button,{type:"text",size:"small",icon:(0,f.jsx)(d.default,{style:{fontSize:16},name:"information-circle-outline"}),disabled:!n})]})})},dt=e=>{let{children:t,style:s}=e;return(0,f.jsx)(l.Tag,{style:{background:"#141413",border:"none",borderRadius:4,marginRight:0,...s},children:t})},ct=(0,n.memo)((e=>{let{endTime:t,label:s}=e;const r=Math.floor(Date.now()/1e3),a=Date.now()/1e3,i=B().duration(t-r,"seconds"),[o,d]=(0,n.useState)({days:Math.floor(i.asDays()),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),c=(0,n.useCallback)((async()=>{if(!t||t<a)return;const e=B().duration(t-r,"seconds"),s=Math.floor(e.asDays()),n=e.hours(),i=e.minutes(),l=e.seconds();d({days:s,hours:n,minutes:i,seconds:l})}),[t,a,r]);return(0,n.useEffect)((()=>{const e=setInterval((()=>c()),1e3);return()=>clearInterval(e)}),[c]),t?t<a?(0,f.jsx)(dt,{children:(0,f.jsx)(l.Typography.Text,{children:"Expired"})}):(0,f.jsxs)(l.Space,{size:6,children:[!!s&&(0,f.jsx)(l.Typography.Text,{type:"secondary",children:s}),(0,f.jsxs)(l.Space,{size:4,children:[!!o.days&&(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(dt,{children:(0,f.jsxs)(l.Typography.Text,{children:[o.days,"d"]})}),":"]}),(0,f.jsx)(dt,{children:(0,f.jsxs)(l.Typography.Text,{children:[o.hours,"h"]})}),":",(0,f.jsx)(dt,{children:(0,f.jsxs)(l.Typography.Text,{children:[o.minutes,"m"]})}),!o.days&&(0,f.jsxs)(n.Fragment,{children:[":",(0,f.jsx)(dt,{children:(0,f.jsxs)(l.Typography.Text,{children:[o.seconds,"s"]})})]})]})]}):(0,f.jsx)(l.Typography.Text,{children:"Unlimited"})})),ut=e=>{const[t,s]=(0,n.useState)([]),a=(0,r.useSelector)((e=>e.boosting)),i=(0,n.useCallback)((()=>{const t=[];Object.keys(a).filter((t=>a[t].farm.toBase58()===e)).map((e=>t.push(a[e]))),s(t)}),[e,a]);return(0,n.useEffect)((()=>{i()}),[i]),t},mt=e=>{let{farmAddress:t}=e;const{to:s}=(0,a.useAppRoute)(I.manifest.appId),r=ut(t),i=oe(t),{endDate:o,startDate:c}=ne(t),[u,m]=(0,n.useState)(new h.BN(0)),p=(0,n.useMemo)((()=>{if(!o||!c)return 0;const e=1e3*o.toNumber(),t=1e3*c.toNumber(),s=Date.now();return e<s?100:(s-t)/(e-t)*100}),[o,c]),x=(0,n.useCallback)((async()=>{const e=await i();m(e)}),[i]);(0,n.useEffect)((()=>{x()}),[x]);const y=new h.BN(Date.now()/1e3);return(0,f.jsx)(l.Card,{bodyStyle:{padding:"20px 16px"},hoverable:!0,bordered:!1,onClick:()=>s(`/${t}`),children:(0,f.jsxs)(l.Row,{gutter:[20,20],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Row,{gutter:[8,8],align:"middle",children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Space,{children:[y.lt(c)&&(0,f.jsxs)(at,{type:"warning",bordered:!1,opacity:.1,radius:8,style:{padding:"1px 8px"},children:[(0,f.jsx)(d.default,{name:"alarm-outline"})," Upcoming"]}),!!r.length&&(0,f.jsx)(at,{type:"primary",bordered:!1,opacity:.1,radius:8,style:{padding:"1px 8px"},children:"\u26a1 Boost"})]}),children:(0,f.jsx)(Ke,{farmAddress:t,textStyle:{fontSize:20,fontWeight:700}})})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Space,{children:[y.lt(c)?(0,f.jsx)(ct,{label:"Start in",endTime:c.toNumber()}):(0,f.jsx)(ct,{label:"End in",endTime:o.toNumber()}),(0,f.jsx)(l.Progress,{type:"circle",percent:p,showInfo:100===p,className:"end-time-progress",strokeWidth:10})]}),children:(0,f.jsx)(ot,{farmAddress:t})})})]})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Row,{justify:"space-between",children:[(0,f.jsx)(l.Col,{children:(0,f.jsx)(nt,{tooltip:(0,f.jsx)(tt,{farmAddress:t}),children:(0,f.jsxs)(l.Space,{direction:"vertical",children:[(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"APR"}),(0,f.jsx)(d.default,{name:"information-circle-outline",className:"icon-describe"})]}),(0,f.jsx)(l.Typography.Title,{level:5,style:{color:"#a0e86f"},children:(0,f.jsx)(Le,{farmAddress:t})}),(0,f.jsx)(Ie,{farmAddress:t})]})})}),(0,f.jsx)(l.Col,{children:(0,f.jsxs)(l.Space,{direction:"vertical",children:[(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"TVL"}),(0,f.jsx)(l.Typography.Title,{level:5,children:(0,f.jsx)(Pe,{farmAddress:t})})]})}),(0,f.jsx)(l.Col,{children:(0,f.jsx)(nt,{tooltip:(0,f.jsx)(_e,{farmAddress:t}),children:(0,f.jsxs)(l.Space,{direction:"vertical",children:[(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Your rewards"}),(0,f.jsx)(d.default,{name:"information-circle-outline",className:"icon-describe"})]}),(0,f.jsx)(l.Typography.Title,{level:5,children:(0,f.jsx)(qe,{farmAddress:t})}),!u.isZero()&&(0,f.jsx)(st,{size:"small",farmAddress:t})]})})})]})})]})})},pt=(0,n.memo)(mt);const ht="farms",xt=(0,Ce.createAsyncThunk)("farms/initFarms",(async e=>e)),yt=(0,Ce.createAsyncThunk)("farms/upsetFarm",(async e=>{let{address:t,data:s}=e;if(!a.util.isAddress(t))throw new Error("Invalid farm address");if(!s)throw new Error("Data is empty");return{[t]:s}})),jt=((0,Ce.createAsyncThunk)("farms/getFarm",(async(e,t)=>{let{address:s}=e,{getState:n}=t;const{farms:{[s]:r}}=n();return{[s]:r}})),(0,Ce.createAsyncThunk)("farms/getFarms",(async(e,t)=>{let{getState:s}=t;const{farms:n}=s();return n}))),ft=(0,Ce.createSlice)({name:ht,initialState:{},reducers:{},extraReducers:e=>{e.addCase(xt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(yt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,gt="rewards",wt=(0,Ce.createAsyncThunk)("rewards/initRewards\n  ",(async e=>e)),bt=(0,Ce.createAsyncThunk)("rewards/upsetReward",(async e=>{let{address:t,data:s}=e;if(!a.util.isAddress(t))throw new Error("Invalid reward address");if(!s)throw new Error("Data is empty");return{[t]:s}})),Ct=(0,Ce.createAsyncThunk)("rewards/getRewards",(async(e,t)=>{let{getState:s}=t;const{rewards:n}=s();return n})),At=(0,Ce.createSlice)({name:gt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(wt.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(bt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Tt="debts",vt=(0,Ce.createAsyncThunk)("debts/initDebt\n  ",(async e=>e)),St=(0,Ce.createAsyncThunk)("debts/upsetDebt",(async e=>{let{address:t,data:s}=e;if(!a.util.isAddress(t))throw new Error("Invalid farm address");if(!s)throw new Error("Data is empty");return{[t]:s}})),kt=(0,Ce.createAsyncThunk)("debts/getDebts",(async(e,t)=>{let{getState:s}=t;const{debts:n}=s();return n})),Bt=(0,Ce.createSlice)({name:Tt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(vt.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(St.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Nt="boosting",Mt=(0,Ce.createAsyncThunk)("boosting/initBoosting\n  ",(async e=>e)),Ft=(0,Ce.createAsyncThunk)("boosting/upsetBoosting",(async e=>{let{address:t,data:s}=e;if(!a.util.isAddress(t))throw new Error("Invalid boosting address");if(!s)throw new Error("Data is empty");return{[t]:s}})),Rt=(0,Ce.createAsyncThunk)("boosting/getBoosts",(async(e,t)=>{let{getState:s}=t;const{boosting:n}=s();return n})),Dt=(0,Ce.createSlice)({name:Nt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Mt.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(Ft.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;function zt(e){return(new Date).getTime()/1e3>e.endDate.toNumber()}const Et=()=>{const e=(0,r.useDispatch)(),t=(0,a.useWalletAddress)();return(0,n.useCallback)((async(s,n)=>{let r=await e(jt()).unwrap();const a=await e(kt()).unwrap(),i=await e(Rt()).unwrap(),l=await e(Ct()).unwrap();let o=Object.keys(r).filter((e=>{const o=r[e];if(!function(e,t){for(const s of Object.values(t))if(s.farm.toBase58()===e)return!0;return!1}(e,l))return!1;if(s&&!function(e,t){for(const s of Object.values(t))if(s.farm.toBase58()===e)return!0;return!1}(e,i))return!1;switch(n){case T.Staked:return function(e,t,s){for(const n of Object.values(s))if(n.authority.toBase58()===t&&n.farm.toBase58()===e)return!n.shares.isZero();return!1}(e,t,a);case T.Your:return function(e,t){return e.authority.toBase58()===t}(r[e],t);case T.Expired:return zt(o);case T.Upcoming:return function(e){return Date.now()/1e3<e.startDate.toNumber()}(o);case T.All:return!zt(o);default:return!1}}));const d={};for(const e of o)d[e]=r[e];return d}),[e,t])},Ot=()=>{const e=(0,ce.B)();return(0,n.useCallback)((async t=>{const s={};return await Promise.all(Object.keys(t).map((async n=>{const{inputMint:r,totalShares:a}=t[n],i=await e(r.toString(),a);s[n]=i}))),s}),[e])},Xt=()=>{const e=(0,r.useDispatch)(),t=Ot(),s=(()=>{const e=Ot(),t=(0,ce.B)();return(0,n.useCallback)((async(s,n)=>{const r={},a=await e(s);for(const e in s){const{startDate:i,endDate:l}=s[e],o=Object.values(n).filter((t=>t.farm.toBase58()===e));let d=0;const c=l.sub(i);for(const e of o){const{rewardMint:s,totalRewards:n}=e,r=n.mul(new h.BN(86400)).div(c);d+=await t(s,r)}r[e]=d/(a[e]||10)*365}return r}),[e,t])})(),a=(0,n.useCallback)((async(n,r)=>{let a=Object.keys(n);if(r.liquidity!==Ae.null){const e=await t(n);a=a.sort(((t,s)=>r.liquidity===Ae.ASC?e[s]-e[t]:e[t]-e[s]))}if(r.apr!==Ae.null){const t=await e(Ct()).unwrap(),i=await s(n,t);a=a.sort(((e,t)=>r.apr===Ae.ASC?i[t]-i[e]:i[e]-i[t]))}return a}),[e,s,t]);return a},Ut=()=>{const{boostOnly:e,farmTab:t,searchKey:s,sortType:i}=(0,r.useSelector)((e=>e.main)),[o,d]=(0,n.useState)([]),[c,u]=(0,n.useState)(!1),m=Xt(),p=Et(),h=(0,n.useCallback)((async()=>{const n=await p(e,t),r=await async function(e,t){if(!t)return e;const s=await a.tokenProvider.find(t),n=new Map;for(const a of s)n.set(a.address,!0);const r={};for(const a in e){const t=e[a];n.has(t.inputMint.toBase58())&&(r[a]=t)}return r}(n,s),l=await m(r,i);return d(l)}),[e,t,s,i,p,m]);return(0,n.useEffect)((()=>{u(!0);const e=setTimeout((async()=>{await h(),setTimeout((()=>{(0,Xe.forceCheck)(),u(!1)}),250)}),300);return()=>clearTimeout(e)}),[h]),(0,f.jsx)(l.Spin,{spinning:c,style:{minHeight:200},children:(0,f.jsx)(l.Row,{gutter:[24,24],children:o.length?o.map((e=>(0,f.jsx)(l.Col,{xs:24,lg:12,children:(0,f.jsx)(Xe.default,{height:230.05,children:(0,f.jsx)(pt,{farmAddress:e})})},e))):(0,f.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,f.jsx)(l.Empty,{className:"ico-empty"})})})})},Ht=()=>{const{pushHistory:e}=Y();return(0,f.jsx)(ee,{children:(0,f.jsxs)(l.Row,{gutter:[24,24],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(we,{})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{gutter:[16,16],style:{flexGrow:10},childFlex:1,floatContent:(0,f.jsx)(l.Button,{onClick:()=>e("/create-farm"),ghost:!0,block:!0,children:"New Farm"}),children:(0,f.jsx)(Fe,{})})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(Oe,{})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(Ut,{})})]})})},Zt=e=>{let{mintAddress:t,size:s=64,style:n,removeable:r=!1,onRemoveNFT:a}=e;return(0,f.jsxs)("div",{style:{position:"relative"},children:[(0,f.jsx)(l.Card,{style:{borderRadius:8,overflow:"hidden"},bodyStyle:{padding:0},bordered:!1,children:(0,f.jsx)(M.AvatarNFT,{mintAddress:t,style:{width:s,height:s,objectFit:"cover",...n}})}),r&&(0,f.jsx)(l.Button,{type:"text",shape:"circle",style:{position:"absolute",minWidth:16,width:16,height:16,top:-4,right:-4,border:"none",background:"#727272",padding:0},icon:(0,f.jsx)(d.default,{name:"close-outline"}),onClick:()=>a(t)})]})},Lt=e=>{let{mintAddress:t,children:s,farmAddress:r}=e;const[i,o]=(0,n.useState)(new h.BN(0)),d=ut(r),c=(0,n.useCallback)((async()=>{let e=new h.BN(0);const{data:{collection:s}}=await I.sol.metaplexNFT.getNftMetadata(t);if(!s)return o(e);for(const t of d){const{boostingCollection:n,boostingCoefficient:r}=t;if(n.toBase58()===s.key){e=r;break}}return o(e)}),[d,t]),u=(0,n.useMemo)((()=>a.util.numeric(i.toNumber()/10**9).format("0,0.[00]%")),[i]);return(0,n.useEffect)((()=>{c()}),[c]),(0,f.jsx)(l.Tooltip,{title:(0,f.jsxs)(l.Row,{style:{width:150},align:"middle",children:[(0,f.jsx)(l.Col,{flex:"auto",children:(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Boosted"})}),(0,f.jsx)(l.Col,{children:(0,f.jsx)(l.Typography.Text,{children:u})})]}),children:s})},Pt=e=>{const t=re(e),[s,r]=(0,n.useState)([]),a=(0,n.useCallback)((async()=>{if(null===t||void 0===t||!t.leverage||t.leverage.eq(S))return r([]);const s=await window.senFarming.deriveAllPDAs({farm:e}),n=await I.sol.metaplexNFT.findDataByOwner(s.debtTreasurer.toBase58());return r(n)}),[null===t||void 0===t?void 0:t.leverage,e]);return(0,n.useEffect)((()=>{a()}),[a]),s},Gt=e=>{const t=Pt(e),s=ut(e);return(0,n.useMemo)((()=>{let e=new h.BN(0);if(!t.length)return e;const n={};for(const t of s){const{boostingCollection:e,boostingCoefficient:s}=t;n[e.toBase58()]=s}for(const{collection:s}of t){if(!s||!n[s.key])continue;const t=n[s.key];e=e.add(t)}return e}),[s,t])},It=e=>{let{farmAddress:t}=e;const[s,r]=(0,n.useState)(!1),[i,o]=(0,n.useState)(""),c=(e=>{const[t,s]=(0,n.useState)(!1),r=re(e),i=ne(e),l=ie(e),o=(0,a.useMintDecimals)({mintAddress:null===i||void 0===i?void 0:i.inputMint.toBase58()});return{unlock:(0,n.useCallback)((async t=>{try{var n;s(!0);const a=await I.sol.metaplexNFT.getNftMetadata(t),i=(null===r||void 0===r?void 0:r.shares)||new h.BN(0),d=l.withdraw(i);if(!o)throw new Error("Not find mint decimals");const c=new h.web3.Transaction;if(!r){const{tx:t}=await window.senFarming.initializeDebt({farm:e,sendAndConfirm:!1});c.add(t)}if(!i.isZero()){const{tx:t}=await window.senFarming.unstake({farm:e,sendAndConfirm:!1});c.add(t)}if(!i.isZero()){const{tx:t}=await window.senFarming.withdraw({farm:e,shares:i,sendAndConfirm:!1});c.add(t)}const{tx:u}=await window.senFarming.unlock({farm:e,nft:t,metadata:a.pubkey.toBase58(),collection:(null===(n=a.data.collection)||void 0===n?void 0:n.key)||"",sendAndConfirm:!1});if(c.add(u),!d.isZero()){const{tx:t}=await window.senFarming.deposit({farm:e,inAmount:d,sendAndConfirm:!1});c.add(t)}const{tx:m}=await window.senFarming.stake({farm:e,sendAndConfirm:!1});c.add(m);const p=window.senFarming.provider,x=await p.sendAndConfirm(c);K("Boosted",x)}catch(a){q(a)}finally{s(!1)}}),[l,r,o,e]),loading:t}})(t),u=Pt(t),m=Gt(t),p=e=>{o(e)},x=()=>o("");return(0,f.jsxs)(l.Row,{gutter:[16,16],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:!!u.length&&(0,f.jsx)(l.Button,{type:"text",onClick:()=>r(!s),children:s?"Cancel":"Unstake"}),children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Typography.Title,{level:5,children:"Your locked NFTs"}),!!u.length&&(0,f.jsx)(at,{children:`${a.util.numeric(Number(m)/10**9).format("0,0.[00]%")}`})]})})}),(0,f.jsx)(l.Spin,{spinning:c.loading,children:(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Row,{gutter:[16,16],children:null===u||void 0===u?void 0:u.map((e=>(0,f.jsx)(Lt,{farmAddress:t,mintAddress:e.mint,children:(0,f.jsx)(l.Col,{style:{cursor:"pointer"},children:(0,f.jsx)(Zt,{mintAddress:e.mint,removeable:s,onRemoveNFT:p})})},e.mint)))})})}),(0,f.jsx)(l.Modal,{visible:!!i,onCancel:x,footer:!1,closable:!1,children:(0,f.jsxs)(l.Row,{gutter:[16,16],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Space,{align:"baseline",children:[(0,f.jsx)(d.default,{name:"information-circle-outline",style:{fontSize:18,color:"#FA8C16"}}),(0,f.jsxs)(l.Space,{direction:"vertical",children:[(0,f.jsx)(l.Typography.Title,{level:5,children:"Are you sure to Unstake NFTs?"}),(0,f.jsx)(l.Typography.Text,{children:"Your staked LP will be reduced in proportion with the unstake NFTs."})]})]})}),(0,f.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Button,{ghost:!0,onClick:x,children:"Cancel"}),(0,f.jsx)(l.Button,{style:{background:"#FF666E",borderColor:"#FF666E"},type:"primary",loading:c.loading,onClick:async()=>{await c.unlock(i),o("")},children:"Unstake"})]})})]})})]})};var Vt=s(23570);const Wt=e=>{let{mintAddress:t,size:s=32,style:n}=e;return(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(Ge.Z,{mintAddress:t,size:s}),(0,f.jsxs)(l.Space,{direction:"vertical",size:0,children:[(0,f.jsx)(l.Typography.Text,{style:{...n},children:(0,f.jsx)(c.Z,{mintAddress:t})}),(0,f.jsx)(l.Typography.Text,{type:"secondary",children:(0,f.jsx)(Vt.Z,{mintAddress:t})})]})]})},Yt=e=>{let{reward:t}=e;return(0,f.jsxs)(l.Space,{direction:"vertical",size:0,style:{textAlign:"right"},children:[(0,f.jsx)(l.Typography.Title,{level:5,children:(0,f.jsx)(m.Z,{mintAddress:t.mint,amount:t.amount,formatter:"0,0.[00000]"})}),(0,f.jsx)(l.Typography.Text,{type:"secondary",children:(0,f.jsx)(Je.Z,{mintAddress:t.mint,amount:t.amount})})]})},Qt=e=>{let{farmAddress:t}=e;const s=de(t);return(0,f.jsxs)(l.Row,{gutter:[12,12],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:(0,f.jsx)(l.Typography.Title,{level:2,children:(0,f.jsx)(qe,{farmAddress:t})}),children:(0,f.jsx)(l.Typography.Text,{children:"Your rewards"})})}),s.map(((e,t)=>(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:(0,f.jsx)(Yt,{reward:e}),children:(0,f.jsx)(Wt,{mintAddress:e.mint,style:{fontSize:16}})})},e.mint+t)))]})},Kt=e=>{let{farmAddress:t}=e;return(0,f.jsx)(l.Card,{style:{borderColor:"#A0E86F",background:"rgba(160, 232, 111, 0.05)"},children:(0,f.jsxs)(l.Row,{gutter:[24,24],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(Qt,{farmAddress:t})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(st,{farmAddress:t})})]})})},qt=e=>{let{label:t,mintAddress:s="",align:n}=e;return(0,f.jsxs)(l.Space,{size:12,direction:"vertical",align:n,children:[(0,f.jsx)(l.Typography.Text,{children:t}),(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(Ge.Z,{mintAddress:s}),(0,f.jsx)(l.Typography.Title,{level:5,children:(0,f.jsx)(c.Z,{mintAddress:s})})]})]})},Jt=e=>{let{label:t,children:s,mintAddress:n="",size:r=8,align:a="start"}=e;return n?(0,f.jsx)(qt,{align:a,label:t,mintAddress:n}):(0,f.jsxs)(l.Space,{align:a,size:r,direction:"vertical",children:[(0,f.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:t}),s]})},_t=e=>{const t=re(e),s=ne(e),r=(0,a.useMintDecimals)({mintAddress:null===s||void 0===s?void 0:s.inputMint.toBase58()}),i=(0,n.useMemo)((()=>t?t.shares.toString():"0"),[t]),l=(0,n.useMemo)((()=>null!==t&&void 0!==t&&t.leverage?t.leverage.eq(S)?new h.BN(0):t.shares.mul(S).div(t.leverage):new h.BN(0)),[t]);console.log(l.toString(),"stakedAmountNFTs");const o=(0,n.useMemo)((()=>s?s.totalShares.toString():"0"),[s]);return(0,n.useMemo)((()=>{const e=new h.BN(i),t=Number(x.utilsBN.undecimalize(e,r||0)),n=Number(x.utilsBN.undecimalize(l,9));return{amountBN:e,amount:t,ratio:Number(i)/Number(o),amountStakedNFTs:n,inputMint:null===s||void 0===s?void 0:s.inputMint.toBase58()}}),[i,r,l,o,null===s||void 0===s?void 0:s.inputMint])},$t=e=>{let{farmAddress:t}=e;const s=(e=>{const[t,s]=(0,n.useState)(0),r=_t(e),a=ne(e),i=(0,ce.B)(),l=(0,n.useCallback)((async()=>{const e=await i(a.inputMint,r.amountBN);return s(e)}),[a.inputMint,i,r.amountBN]);return(0,he.Z)(l,500,[l]),t})(t);return(0,f.jsxs)(l.Typography.Text,{type:"secondary",children:["\u2248 ",a.util.numeric(s).format("$0,0.[00]")]})},es=e=>{let{farmAddress:t}=e;const s=_t(t),{endDate:r,startDate:i,inputMint:o}=ne(t),u=ut(t),m=new h.BN(Date.now()/1e3),p=(0,n.useMemo)((()=>{if(!r||!i)return 0;const e=1e3*r.toNumber(),t=1e3*i.toNumber(),s=Date.now();return e<s?100:(s-t)/(e-t)*100}),[r,i]);return(0,f.jsxs)(l.Row,{gutter:[24,24],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Space,{style:{width:"100%"},direction:"vertical",size:12,children:[(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Space,{children:[m.lt(i)&&(0,f.jsxs)(at,{type:"warning",bordered:!1,opacity:.1,radius:8,style:{padding:"1px 8px"},children:[(0,f.jsx)(d.default,{name:"alarm-outline"})," Upcoming"]}),!!u.length&&(0,f.jsx)(at,{type:"primary",bordered:!1,opacity:.1,radius:8,style:{padding:"1px 8px"},children:"\u26a1 Boost"})]}),children:(0,f.jsx)(Ke,{farmAddress:t,textStyle:{fontSize:30,fontWeight:700},hoverable:!0})}),(0,f.jsxs)(l.Space,{children:[m.lt(i)?(0,f.jsx)(ct,{label:"Start in",endTime:i.toNumber()}):(0,f.jsx)(ct,{label:"End in",endTime:r.toNumber()}),(0,f.jsx)(l.Progress,{type:"circle",percent:p,showInfo:100===p,className:"end-time-progress",strokeWidth:10})]})]})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Row,{justify:"space-between",children:[(0,f.jsx)(l.Col,{children:(0,f.jsx)(Jt,{label:"APR",children:(0,f.jsx)(l.Typography.Title,{style:{color:"#A0E86F"},level:4,children:(0,f.jsx)(Le,{farmAddress:t})})})}),(0,f.jsx)(l.Col,{children:(0,f.jsx)(Jt,{label:"TVL",children:(0,f.jsx)(l.Typography.Title,{level:4,children:(0,f.jsx)(Pe,{farmAddress:t})})})}),(0,f.jsx)(l.Col,{children:(0,f.jsx)(l.Space,{direction:"vertical",size:0,children:(0,f.jsx)(Jt,{label:"You staked",children:(0,f.jsx)(l.Tooltip,{title:(0,f.jsx)($t,{farmAddress:t}),arrowPointAtCenter:!0,children:(0,f.jsxs)(l.Space,{direction:"vertical",children:[(0,f.jsxs)(l.Space,{size:6,children:[(0,f.jsx)(l.Typography.Title,{level:4,children:a.util.numeric(s.amount).format("0,0.[00]")}),(0,f.jsx)(l.Typography.Title,{level:4,children:(0,f.jsx)(c.Z,{mintAddress:o.toBase58()})})]}),!!u.length&&!!s.amountStakedNFTs&&(0,f.jsxs)(at,{radius:8,style:{padding:"1px 8px"},bordered:!1,opacity:.1,type:"primary",children:[a.util.numeric(s.amountStakedNFTs).format("0,0.[00]")," ",(0,f.jsx)(c.Z,{mintAddress:o.toBase58()})," ","Boosted"]})]})})})})}),(0,f.jsx)(l.Col,{children:(0,f.jsx)(Jt,{label:"Your position",children:(0,f.jsx)(l.Typography.Title,{level:4,children:a.util.numeric(s.ratio).format("0,0.[00]%")})})})]})})]})},ts=e=>{let{farmAddress:t}=e;const s=ut(t);return(0,f.jsx)(l.Card,{bordered:!1,style:{height:"100%"},children:(0,f.jsxs)(l.Row,{gutter:[24,24],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(es,{farmAddress:t})}),(0,f.jsx)(l.Col,{xs:24,md:12,lg:24,xl:12,children:(0,f.jsx)(Kt,{farmAddress:t})}),(0,f.jsx)(l.Col,{xs:24,md:12,lg:24,xl:12,children:(0,f.jsx)(et,{farmAddress:t})}),!!s.length&&(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Divider,{style:{margin:0}})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(It,{farmAddress:t})})]})]})})},ss=e=>{let{value:t,max:s,onChange:n=(()=>{})}=e;return(0,f.jsx)(l.InputNumber,{stringMode:!0,decimalSeparator:".",controls:!1,placeholder:"0",bordered:!1,size:"large",style:{padding:0,width:"100%",color:"#C6F1A9",fontSize:24},value:t,onChange:n,max:s,min:"0"})},ns=e=>{let{mint:t="",value:s,onChange:n,available:r=0}=e;return(0,f.jsx)(l.Card,{bodyStyle:{padding:12},style:{boxShadow:"none",borderRadius:8,background:"#0A0A0A"},bordered:!1,children:(0,f.jsxs)(l.Row,{gutter:[16,16],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Space,{size:6,children:[(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,f.jsx)(l.Typography.Text,{children:`${a.util.numeric(r).format("0,0.[00]")}`}),(0,f.jsx)(c.Z,{mintAddress:t})]}),children:(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(be,{floatContent:(0,f.jsx)(l.Button,{size:"small",type:"text",style:{color:"#C6F1A9"},onClick:()=>n(r.toString()),children:"MAX"}),wrap:!1,children:(0,f.jsx)(ss,{value:s,onChange:n,max:r.toString()})})})]})})};var rs=s(63396),as=s(21995),is=s.n(as);const ls=e=>{let{farmAddress:t}=e;const s=(0,n.useCallback)((async e=>{if("devnet"===a.rpc)return"";const t=is().create({baseURL:"https://api-mainnet.magiceden.dev/v2",timeout:3e4,headers:{"Content-Type":"application/json",accept:"application/json"}});return await t.get(`/tokens/${e}`).then((e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.collection)||""})).catch()}),[]),r=ut(t),i=(0,n.useMemo)((()=>r.map((e=>{let{boostingCollection:t,boostingCoefficient:s}=e;return{address:t.toBase58(),percent:s}}))),[r]);return(0,f.jsx)(l.List,{itemLayout:"horizontal",dataSource:i,renderItem:e=>{let{address:t,percent:n}=e;return(0,f.jsx)(l.List.Item,{children:(0,f.jsxs)(l.Space,{style:{cursor:"pointer"},size:8,onClick:()=>(async e=>{const t=await s(e);if(t)return window.open(`https://hub.sentre.io/app/any_arts/${t}?autoInstall=true`,"_blank")})(t),children:[(0,f.jsx)(l.Typography.Text,{children:"\u2022"}),(0,f.jsxs)(l.Typography.Text,{style:{textDecoration:"underline"},children:[(0,f.jsx)(rs.Z,{mintAddress:t}),":"," ",(0,f.jsx)("span",{style:{color:"#A0E86F"},children:a.util.numeric(n.toNumber()/10**9).format("0,0.[00]%")})]})]})})}})},os=e=>{let{farmAddress:t}=e;return(0,f.jsxs)(l.Row,{children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Typography.Text,{className:"caption",children:"Only farm owner-approved NFTs can be used for this farm. Each NFT collection will give a different boost rate depending on the settings of the farm owner. NFTs in the collections below will be approved for this farm:"})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(ls,{farmAddress:t})})]})},ds=e=>{let{farmAddress:t}=e;return(0,f.jsx)(l.Tooltip,{title:(0,f.jsx)(os,{farmAddress:t}),children:(0,f.jsx)(d.default,{style:{fontSize:18,cursor:"pointer"},name:"information-circle-outline"})})},cs=e=>{let{acceptedCollections:t,onSelect:s,selectedNFTs:r}=e;const[a,i]=(0,n.useState)(!1);return(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(l.Card,{className:"upload-box card-nft-image-only",bodyStyle:{padding:0},onClick:()=>i(!0),children:(0,f.jsx)(l.Button,{type:"text",className:"icon-add-nft",icon:(0,f.jsx)(d.default,{name:"add-outline",style:{color:"#a0e86f"}})})}),(0,f.jsx)(l.Modal,{visible:a,closeIcon:(0,f.jsx)(d.default,{name:"close-outline"}),onCancel:()=>i(!1),footer:null,className:"modal-nft-selection",style:{paddingBottom:0},children:(0,f.jsxs)(l.Row,{gutter:[24,24],style:{maxHeight:400},children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Typography.Title,{level:4,children:"Select a NFT"})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(M.SearchNFT,{onSelect:e=>{i(!1),s(e)},collectionAddress:t,selectedNFTs:r})})]})})]})},us=e=>{const{farmAddress:t,selectedNFTs:s,setSelectedNFTs:r}=e,a=ut(t),i=(0,n.useMemo)((()=>a.map((e=>e.boostingCollection.toBase58()))),[a]);return(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Space,{className:"space-middle-icon",children:[(0,f.jsx)(l.Typography.Text,{children:" Use NFTs to increase LP"}),(0,f.jsx)(ds,{farmAddress:t})]})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Row,{gutter:[16,16],children:[(0,f.jsx)(l.Col,{children:(0,f.jsx)(cs,{acceptedCollections:i,onSelect:e=>{const t=[...s];return t.push(e),r(t)},selectedNFTs:s})}),s.map((e=>(0,f.jsx)(l.Col,{children:(0,f.jsx)(Lt,{farmAddress:t,mintAddress:e,children:(0,f.jsxs)(l.Card,{className:"upload-box card-nft-image-only",children:[(0,f.jsx)("div",{className:"nft-image",children:(0,f.jsx)(M.AvatarNFT,{mintAddress:e,size:64,style:{borderRadius:8,marginTop:-1}})}),(0,f.jsx)(l.Button,{type:"text",className:"icon-delete-nft",onClick:()=>(e=>{const t=[...s],n=t.findIndex((t=>t===e));if(-1!==n)return t.splice(n,1),r(t)})(e),icon:(0,f.jsx)(d.default,{name:"trash-outline"})})]})})},e)))]})})]})},ms=e=>{const[t,s]=(0,n.useState)(!1),r=re(e),i=ne(e),l=(0,a.useMintDecimals)({mintAddress:null===i||void 0===i?void 0:i.inputMint.toBase58()}),o=(e=>{const t=ne(e),s=(0,a.useMintDecimals)({mintAddress:null===t||void 0===t?void 0:t.inputMint.toBase58()});return(0,n.useCallback)((async t=>{var n;const r=await I.sol.metaplexNFT.getNftMetadata(t);if(!s)throw new Error("Not find mint decimals");const a=new h.web3.Transaction,{tx:i}=await window.senFarming.lock({farm:e,nft:t,metadata:r.pubkey.toBase58(),collection:(null===(n=r.data.collection)||void 0===n?void 0:n.key)||"",sendAndConfirm:!1});return a.add(i),a}),[s,e])})(e);return{stake:(0,n.useCallback)((async t=>{let{inAmount:n,nfts:a}=t;try{if(s(!0),!l)throw new Error("Not find mint decimals");const t=[],i=r?r.shares:new h.BN(0),d=r?r.leverage:new h.BN(1);if(!r){const{tx:s}=await window.senFarming.initializeDebt({farm:e,sendAndConfirm:!1});t.push(s)}const c=new h.web3.Transaction,{tx:u}=await window.senFarming.unstake({farm:e,sendAndConfirm:!1}),{tx:m}=await window.senFarming.withdraw({farm:e,shares:i,sendAndConfirm:!1});if(c.add(u),c.add(m),a.length)for(const e of a){const t=await o(e);c.add(t)}t.push(c);const p=x.utilsBN.decimalize(n,l),y=i.mul(S).div(d),j=new h.web3.Transaction,{tx:f}=await window.senFarming.deposit({farm:e,inAmount:p.add(y),sendAndConfirm:!1}),{tx:g}=await window.senFarming.stake({farm:e,sendAndConfirm:!1});j.add(f),j.add(g),t.push(j);const w=window.senFarming.provider;return await w.sendAll(t.map((e=>({tx:e})))),window.notify({type:"success",description:"Staked successfully."})}catch(i){return q(i)}finally{s(!1)}}),[r,l,e,o]),loading:t}},ps=e=>{let{farmAddress:t}=e;const[s,r]=(0,n.useState)(""),[i,o]=(0,n.useState)([]),[u,m]=(0,n.useState)({}),p=ne(t),{stake:y,loading:g}=ms(t),w=re(t),b=Gt(t),C=(e=>{const t=ut(e);return(0,n.useCallback)((async e=>{const s={},n={};for(const r of t){const{boostingCollection:e,boostingCoefficient:t}=r;s[e.toBase58()]=t}for(const t of e){const{data:{collection:e}}=await I.sol.metaplexNFT.getNftMetadata(t);if(!e||!s[e.key])continue;const r=s[e.key];n[t]=r}return n}),[t])})(t),A=(0,a.useMintDecimals)({mintAddress:p.inputMint.toBase58()})||0,T=it[p.inputMint.toBase58()],v=ut(t),{balance:k}=j(p.inputMint.toBase58()),B=(0,n.useMemo)((()=>{const e=Number(s);return 0===e?0:e}),[s]),N=(0,n.useMemo)((()=>w&&(B||i.length)?w.shares.mul(S).div(w.leverage):new h.BN(0)),[w,i.length,B]),M=B||i.length?b:new h.BN(0),F=(0,n.useMemo)((()=>{let e=new h.BN(0);if(!i.length)return e;for(const t in u){const s=u[t];e=e.add(s)}return e}),[u,i.length]),R=M.add(F),D=(0,n.useMemo)((()=>Number(B)&&w?N.add(x.utilsBN.decimalize(B,A)).mul(R).div(S):new h.BN(0)),[w,A,N,R,B]),z=(0,n.useMemo)((()=>w?x.utilsBN.undecimalize(x.utilsBN.decimalize(B,A).add(N).add(D),A):"0"),[D,w,A,N,B]),E=(0,n.useMemo)((()=>!Number(s)||zt(p)),[p,s]),O=(0,n.useCallback)((async()=>{const e=await C(i);return m(e)}),[C,i]);return(0,n.useEffect)((()=>{O()}),[O]),(0,f.jsxs)(l.Row,{gutter:[16,16],style:{height:"100%"},children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(ns,{mint:p.inputMint.toBase58(),value:s,onChange:r,available:k})}),!!v.length&&(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(us,{selectedNFTs:i,setSelectedNFTs:o,farmAddress:t})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Card,{bodyStyle:{padding:12},style:{boxShadow:"none",borderRadius:8,background:"#2D2E2D"},bordered:!1,children:(0,f.jsxs)(l.Space,{size:8,direction:"vertical",style:{width:"100%"},children:[(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Space,{size:6,children:[(0,f.jsx)(l.Typography.Text,{children:a.util.numeric(x.utilsBN.undecimalize(N,A)).format("0,0.[0000]")}),(0,f.jsx)(l.Typography.Text,{children:(0,f.jsx)(c.Z,{mintAddress:p.inputMint.toBase58()})})]}),children:(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Staked LP"})}),(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Space,{size:6,children:[(0,f.jsx)(l.Typography.Text,{children:B||0}),(0,f.jsx)(l.Typography.Text,{children:(0,f.jsx)(c.Z,{mintAddress:p.inputMint.toBase58()})})]}),children:(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"LP amount"})}),(0,f.jsx)(be,{floatContent:(0,f.jsx)(l.Typography.Text,{style:{color:"#A0E86F"},children:a.util.numeric(Number(R)/10**9).format("0,0.[00]%")}),children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Total boost rate"}),(0,f.jsx)(l.Tooltip,{title:"Boost rate will be calculated based on all NFTs you lock.",children:(0,f.jsx)(d.default,{style:{cursor:"pointer"},name:"information-circle-outline"})})]})}),(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Space,{size:6,children:[(0,f.jsxs)(l.Typography.Title,{level:5,style:{color:"#A0E86F"},children:["+",a.util.numeric(x.utilsBN.undecimalize(D,A)).format("0,0.[0000]")]}),(0,f.jsx)(l.Typography.Title,{level:5,style:{color:"#A0E86F"},children:(0,f.jsx)(c.Z,{mintAddress:p.inputMint.toBase58()})})]}),children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Boosted by NFT"}),(0,f.jsx)(l.Tooltip,{title:"Boosted LP = (Staked LP + LP amount) * Total boost rate)",children:(0,f.jsx)(d.default,{style:{cursor:"pointer"},name:"information-circle-outline"})})]})}),(0,f.jsx)(be,{floatContent:(0,f.jsxs)(l.Space,{size:6,children:[(0,f.jsx)(l.Typography.Title,{level:5,children:a.util.numeric(z).format("0,0.[0000]")}),(0,f.jsx)(l.Typography.Title,{level:5,children:(0,f.jsx)(c.Z,{mintAddress:p.inputMint.toBase58()})})]}),children:(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Total"})}),(0,f.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:"*Total = Staked LP + LP amount + Boosted LP"})]})})})]}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Button,{size:"large",type:"primary",block:!0,disabled:E,loading:g,onClick:async()=>{await y({farm:t,nfts:i,inAmount:Number(s)}),r(""),o([])},children:Number(s)?"Stake":"Enter an amount"})}),(0,f.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,f.jsxs)(l.Typography.Title,{style:{cursor:"pointer",color:"#A0E86F"},onClick:()=>{if(!T)return;const e=Object.values(T).find((e=>e.recommend));return e?window.open(e.url):void 0},level:5,children:["Get ",(0,f.jsx)(c.Z,{mintAddress:p.inputMint.toBase58()})," to deposit"]})})]})},hs=e=>{let{farmAddress:t}=e;const[s,r]=(0,n.useState)(""),i=_t(t),{unstake:o,loading:d}=(e=>{const[t,s]=(0,n.useState)(!1),r=ne(e),i=re(e),l=(0,a.useMintDecimals)({mintAddress:null===r||void 0===r?void 0:r.inputMint.toBase58()});return{unstake:(0,n.useCallback)((async t=>{let{amount:n}=t;try{if(s(!0),!l)throw new Error("Not find mint decimals");if(!i)return;const t=x.utilsBN.decimalize(n,l).mul(i.leverage).div(S),r=new h.web3.Transaction,{tx:a}=await window.senFarming.unstake({farm:e,sendAndConfirm:!1});r.add(a);const{tx:o}=await window.senFarming.withdraw({farm:e,shares:t,sendAndConfirm:!1});r.add(o);const{tx:d}=await window.senFarming.stake({farm:e,sendAndConfirm:!1});r.add(d);const c=window.senFarming.provider,u=await c.sendAndConfirm(r);K("Unstake",u)}catch(r){q(r)}finally{s(!1)}}),[i,l,e]),loading:t}})(t),c=re(t),u=(0,n.useMemo)((()=>{if(!c)return 0;const e=c.shares.mul(S).div(c.leverage);return Number(x.utilsBN.undecimalize(e,9))}),[c]);return(0,f.jsxs)(l.Row,{gutter:[16,16],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(ns,{available:u,value:s,onChange:r,mint:i.inputMint})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Button,{type:"primary",size:"large",block:!0,disabled:!Number(s),loading:d,onClick:async()=>{await o({amount:Number(s)}),r("")},danger:!0,children:"Unstake"})})]})},xs=e=>{let{placeholder:t="E.g. BkLRcJu...",farmAddress:s}=e;const[r,i]=(0,n.useState)(""),{transferOwner:o,loading:c}=(()=>{const[e,t]=(0,n.useState)(!1);return{transferOwner:(0,n.useCallback)((async(e,s)=>{if(a.util.isAddress(e)&&a.util.isAddress(s))try{t(!0);const{txId:n}=await window.senFarming.transferOwnership({farm:e,newOwner:s});K("Transfer",n)}catch(n){q(n)}finally{t(!1)}}),[]),loading:e}})();return(0,f.jsxs)(l.Row,{gutter:[24,24],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Space,{children:[(0,f.jsx)(d.default,{name:"alert-circle-outline"}),(0,f.jsx)(l.Typography.Text,{type:"secondary",children:"Your current account will lose the farm control when you transfer ownership."})]})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Card,{bordered:!1,style:{background:"#2D2E2D"},bodyStyle:{padding:16},children:(0,f.jsxs)(l.Row,{gutter:[8,8],children:[(0,f.jsx)(l.Col,{children:(0,f.jsx)(l.Typography.Text,{children:"Transfer to Ownership"})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Input,{bordered:!1,value:r,placeholder:t,onChange:e=>i(e.target.value)})})]})})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Button,{ghost:!0,onClick:()=>o(s,r),block:!0,loading:c,disabled:!r,children:"Transfer"})})]})},ys={Stake:"Stake",Unstake:"Unstake",Transfer:"Transfer Ownership"},js=e=>{let{farmAddress:t}=e;const[s,r]=(0,n.useState)(ys.Stake),{authority:i}=ne(t),o=(0,a.useWalletAddress)(),d=!a.util.isAddress(o)||o!==i.toBase58();return(0,f.jsx)(l.Card,{bordered:!1,style:{height:"100%"},children:(0,f.jsxs)(l.Row,{gutter:[16,16],style:{height:"100%"},children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Segmented,{value:s,options:Object.keys(ys).filter((e=>"Transfer"!==e||!d)).map((e=>({label:ys[e],value:ys[e]}))),onChange:e=>r(e.toString())})}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsxs)(l.Tabs,{defaultActiveKey:ys.Stake,activeKey:s,style:{width:"100%",height:"100%"},onChange:r,renderTabBar:()=>(0,f.jsx)(n.Fragment,{}),children:[(0,f.jsx)(l.Tabs.TabPane,{tab:ys.Stake,children:(0,f.jsx)(ps,{farmAddress:t})},ys.Stake),(0,f.jsx)(l.Tabs.TabPane,{tab:ys.Unstake,children:(0,f.jsx)(hs,{farmAddress:t})},ys.Unstake),(0,f.jsx)(l.Tabs.TabPane,{tab:ys.Transfer,disabled:d,children:(0,f.jsx)(xs,{farmAddress:t})},ys.Transfer)]})})]})})},fs=()=>{const{pushHistory:e}=Y();return(0,f.jsx)(l.Row,{justify:"space-between",children:(0,f.jsx)(l.Col,{children:(0,f.jsx)(l.Button,{type:"text",icon:(0,f.jsx)(d.default,{name:"arrow-back-outline"}),onClick:()=>{e("/farms")},style:{padding:0},children:"Back"})})})},gs=()=>(0,f.jsxs)(l.Row,{gutter:[64,64],justify:"center",children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(fs,{})}),(0,f.jsx)(l.Col,{xs:24,md:12,children:(0,f.jsxs)(l.Row,{gutter:[24,24],style:{flexDirection:"column"},align:"middle",children:[(0,f.jsx)(l.Col,{children:(0,f.jsx)(l.Image,{src:"data:image/png;base64,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",preview:!1})}),(0,f.jsx)(l.Col,{children:(0,f.jsx)(l.Typography.Title,{level:2,children:"Farm Address Not Found."})})]})})]}),ws=()=>{const{farmAddress:e}=(0,i.useParams)(),t=ne(e);return a.util.isAddress(e)&&t?(0,f.jsx)(ee,{children:(0,f.jsxs)(l.Row,{gutter:[24,24],children:[(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(fs,{})}),(0,f.jsx)(l.Col,{xs:24,lg:14,children:(0,f.jsx)(ts,{farmAddress:e})}),(0,f.jsx)(l.Col,{xs:24,lg:10,children:(0,f.jsx)(js,{farmAddress:e})})]})}):(0,f.jsx)(gs,{})},bs=()=>{const{appRoute:e}=Y();return(0,f.jsxs)(i.Switch,{children:[(0,f.jsx)(i.Route,{exact:!0,path:`${e}/create-farm`,component:$}),(0,f.jsx)(i.Route,{exact:!0,path:`${e}/farms`,component:Ht}),(0,f.jsx)(i.Route,{path:`${e}/:farmAddress`,component:ws}),(0,f.jsx)(i.Route,{path:"*",children:(0,f.jsx)(i.Redirect,{to:`${e}/farms`})})]})};var Cs=s(71256),As=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const Ts={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof Cs.PublicKey||e instanceof He()||As.isBuffer(e)}},vs=(0,Ce.configureStore)({middleware:e=>e(Ts),devTools:!1,reducer:{main:Me,farms:ft,debts:Bt,boosting:Dt,rewards:At}});var Ss=s(68321),ks=s.n(Ss),Bs=s(73466);const Ns={},Ms=(0,Bs.r)({}),Fs=e=>{const{program:t,name:s,filter:r,upset:a,init:i}=e,[l,o]=(0,n.useState)(0),[,d]=Ms(),{accountClient:c,connection:u}=(0,n.useMemo)((()=>{var e;const n=null===t||void 0===t||null===(e=t.account)||void 0===e?void 0:e[s];return{accountClient:n,connection:n.provider.connection}}),[s,null===t||void 0===t?void 0:t.account]),m=(0,n.useCallback)((async()=>{if(void 0===Ns[s])try{Ns[s]=!0,d({...Ns,[s]:!0});const e=await c.all(r),t={};for(const s of e)t[s.publicKey.toBase58()]=s.account;await i(t)}catch(e){q(e)}finally{Ns[s]=!1,d({...Ns,[s]:!1})}}),[c,r,i,s,d]),p=(0,n.useCallback)((async()=>{if(l)return;const e=u.onProgramAccountChange(c.programId,(async e=>{const n=e.accountId.toBase58(),r=e.accountInfo.data,i=t.coder.accounts.decode(s,r);a(n,i)}),"confirmed",[{dataSize:c.size},{memcmp:{offset:0,bytes:(0,x.encodeIxData)((0,x.accountDiscriminator)(s))}},...r]);o(e)}),[c.programId,c.size,u,r,s,t.coder.accounts,a,l]);return(0,n.useEffect)((()=>{m()}),[m]),(0,n.useEffect)((()=>(p(),()=>{(async()=>{l&&await u.removeProgramAccountChangeListener(l)})()})),[u,p,l]),(0,f.jsx)(n.Fragment,{})},Rs=()=>(0,f.jsx)("div",{className:"loading-screen",style:{display:"block"},children:(0,f.jsxs)(l.Row,{gutter:[24,24],children:[(0,f.jsx)(l.Col,{span:24,style:{height:256}}),(0,f.jsx)(l.Col,{span:24,children:(0,f.jsx)(l.Row,{gutter:[24,24],justify:"center",children:(0,f.jsx)(l.Col,{children:(0,f.jsxs)(l.Space,{direction:"vertical",align:"center",size:32,children:[(0,f.jsx)(l.Spin,{size:"large"}),(0,f.jsx)(l.Typography.Title,{level:5,children:"Welcome to Sen Farming V2. The application is loading..."})]})})})})]})}),Ds=[],zs=()=>{const e=(0,r.useDispatch)(),t=(0,n.useCallback)((t=>e(xt(t))),[e]),s=(0,n.useCallback)(((t,s)=>e(yt({address:t,data:s}))),[e]);return(0,f.jsx)(Fs,{program:window.senFarming.program,name:"farm",filter:Ds,init:t,upset:s})},Es=()=>{const e=(0,r.useDispatch)(),t=(0,a.useWalletAddress)(),s=(0,n.useCallback)((t=>e(vt(t))),[e]),i=(0,n.useCallback)(((t,s)=>e(St({address:t,data:s}))),[e]),l=(0,n.useMemo)((()=>[{memcmp:{bytes:(0,x.encodeIxData)(new h.web3.PublicKey(t).toBuffer()),offset:40}}]),[t]);return(0,f.jsx)(Fs,{program:window.senFarming.program,name:"debt",filter:l,init:s,upset:i})},Os=[],Xs=()=>{const e=(0,r.useDispatch)(),t=(0,n.useCallback)((t=>e(Mt(t))),[e]),s=(0,n.useCallback)(((t,s)=>e(Ft({address:t,data:s}))),[e]);return(0,f.jsx)(Fs,{program:window.senFarming.program,name:"farmBoostingCollection",filter:Os,init:t,upset:s})},Us=[],Hs=()=>{const e=(0,r.useDispatch)(),t=(0,n.useCallback)((t=>e(wt(t))),[e]),s=(0,n.useCallback)(((t,s)=>e(bt({address:t,data:s}))),[e]);return(0,f.jsx)(Fs,{program:window.senFarming.program,name:"farmRewardMint",filter:Us,init:t,upset:s})},Zs=e=>{let{children:t}=e;const[s]=Ms(),r=(0,n.useMemo)((()=>!Object.values(s).length||Object.values(s).includes(!0)),[s]);return(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(zs,{}),(0,f.jsx)(Es,{}),(0,f.jsx)(Xs,{}),(0,f.jsx)(Hs,{}),r?(0,f.jsx)(Rs,{}):t]})},{sol:{senFarmingProgram:Ls}}=I,Ps=e=>{let{children:t}=e;const s=(0,a.useWalletAddress)(),[r,i]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(r)return;const e=(0,x.getAnchorProvider)(a.rpc,s,window.sentre.wallet),t=new(ks())(e,Ls);window.senFarming=t,i(!0)}),[s,r]),r?(0,f.jsx)(Zs,{children:t}):null};var Gs=s(45597);const{manifest:{appId:Is}}=I,Vs=(0,n.memo)((()=>(0,f.jsx)(r.Provider,{store:vs,children:(0,f.jsx)(Ps,{children:(0,f.jsx)(bs,{})})}))),Ws=()=>{const e=(0,a.useSetBackground)();return(0,n.useEffect)((()=>{e({light:"#141413",dark:"#141413"})}),[e]),(0,f.jsx)(Vs,{})},Ys=()=>(0,f.jsx)(a.AntdProvider,{appId:Is,prefixCls:Is,children:(0,f.jsx)(Ws,{})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.dd3222bdab290f263138.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.18578bbd9d4d7fd1b277.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.c9588dd300391805e203.png"},85468:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel2.8b0dc13c12b48f79f64c.png"},43094:()=>{},69159:()=>{},25129:()=>{},44454:()=>{},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},89408:()=>{},47956:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-f87083.2cbbe140.chunk.js.map