(globalThis.webpackChunksen_farming_v2=globalThis.webpackChunksen_farming_v2||[]).push([["node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-49b12f","node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive"],{90571:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=90571,e.exports=t},98463:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ReactComponent:()=>h,default:()=>p});var s,r,a,i,l,o,d,c=n(92950);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u.apply(this,arguments)}function m(e,t){let{title:n,titleId:m,...h}=e;return c.createElement("svg",u({width:96,height:96,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":m},h),n?c.createElement("title",{id:m},n):null,s||(s=c.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0H72C85.2548 0 96 10.7452 96 24V72C96 85.2548 85.2548 96 72 96H24C10.7452 96 0 85.2548 0 72V24Z",fill:"url(#paint0_linear_3080_6014)"})),r||(r=c.createElement("path",{d:"M73.9637 43.986H75.6542C75.7684 43.986 77.2305 43.9392 76.4538 41.8327C75.6314 39.6326 73.0727 39.4922 73.0727 39.4922L69.189 25.0512C69.189 25.0512 68.7092 22.5 66.2648 22.5C63.7975 22.5 43.351 22.5 43.351 22.5C43.351 22.5 40.1983 22.5702 40.1983 26.1278H43.1682L39.6501 39.7028H36.1776V32.4472C36.1776 32.4472 36.1547 29.9897 33.7103 29.9897C31.243 29.9897 30.4434 29.9897 30.4434 29.9897L31.4486 32.6345H33.0935C33.0935 32.6345 33.1163 32.6345 33.1391 32.6345C33.2762 32.6345 33.6874 32.7047 33.6874 33.5239C33.6874 34.5069 33.6874 39.7731 33.6874 39.7731H22.5618C22.5618 39.7731 22.5618 39.7731 22.5389 39.7731C22.242 39.7731 18.541 39.8433 18.541 43.6583C18.541 47.6372 19.2492 54.6588 19.2492 54.6588C16.6906 56.5312 15 59.6207 15 63.1315C15 68.8658 19.5462 73.5 25.1433 73.5C30.7404 73.5 35.2866 68.8424 35.2866 63.1081C35.2866 60.791 34.5327 58.6377 33.2762 56.9057H37L37.7996 59.0824H45.9553L46.6636 56.8121L49.5192 56.8355C49.5192 57.0227 49.5192 57.1866 49.5192 57.3738C49.5192 66.2678 56.5556 73.5 65.2596 73.5C73.9408 73.5 81 66.2912 81 57.3738C80.9543 51.8034 78.1672 46.8883 73.9637 43.986ZM25.1661 68.5615C22.1963 68.5615 19.7747 66.0805 19.7747 63.0379C19.7747 59.9952 22.1963 57.5142 25.1661 57.5142C28.136 57.5142 30.5576 59.9952 30.5576 63.0379C30.5805 66.0805 28.1589 68.5615 25.1661 68.5615ZM57.6293 27.1108C57.6293 26.9704 57.6521 26.2448 58.2004 25.7065C58.4517 25.4491 58.8858 25.1448 59.6168 25.1448H65.8764C66.1277 25.1448 67.4299 25.2618 67.8868 27.3683C68.2295 28.8896 70.1028 36.941 70.1713 37.2921C70.217 37.4793 70.4226 38.4156 69.8744 39.1645C69.6231 39.5156 69.1205 39.9135 68.2066 39.9135H59.6168C58.8172 39.9135 57.6521 39.3752 57.6521 37.8772V27.1108H57.6293ZM44.6989 40.0071C44.676 40.0071 44.6532 40.0071 44.6303 40.0071C44.5389 40.0071 43.648 39.9135 43.1225 39.1879C42.8712 38.8603 42.6199 38.2985 42.8027 37.4325C43.0997 36.0282 45.0187 26.7129 45.0415 26.6193C45.0415 26.5959 45.0415 26.5725 45.0644 26.5257C45.2243 26.0108 45.7954 25.1448 46.9605 25.1448H54.4309C55.1848 25.1448 56.3956 25.7065 56.3956 27.181V38.1815C56.3956 38.2049 56.3956 38.2283 56.3956 38.2283C56.3499 38.9305 55.8017 39.9837 54.4538 39.9837H44.6989V40.0071ZM65.2596 68.07C59.5711 68.07 54.9335 63.3187 54.9335 57.4908C54.9335 51.6629 59.5711 46.9117 65.2596 46.9117C70.9481 46.9117 75.5857 51.6629 75.5857 57.4908C75.5857 63.3187 70.9481 68.07 65.2596 68.07Z",fill:"#212433"})),a||(a=c.createElement("path",{opacity:.5,d:"M69.8741 39.1648C69.6228 39.5158 69.1202 39.9137 68.2064 39.9137H59.6166C58.817 39.9137 57.6519 39.3754 57.6519 37.8775V27.1111C57.6519 26.9706 57.6747 26.2451 58.223 25.7067C58.4743 25.4493 58.9083 25.145 59.6394 25.145H65.899C66.1503 25.145 67.4525 25.262 67.9094 27.3685C68.2521 28.8899 70.1254 36.9413 70.1939 37.2923C70.2168 37.503 70.4224 38.4392 69.8741 39.1648Z",fill:"#212433"})),i||(i=c.createElement("path",{opacity:.5,d:"M56.3955 27.181V38.1815C56.3955 38.2049 56.3955 38.2283 56.3955 38.2283C56.3498 38.9304 55.8015 39.9837 54.4537 39.9837H44.6987C44.6759 39.9837 44.653 39.9837 44.6302 39.9837C44.5388 39.9837 43.6479 39.89 43.1224 39.1645C42.8711 38.8368 42.6198 38.2751 42.8026 37.4091C43.0996 36.0048 45.0186 26.6895 45.0414 26.5959C45.0414 26.5725 45.0414 26.5491 45.0643 26.5022C45.2242 25.9873 45.7953 25.1213 46.9604 25.1213H54.4308C55.1847 25.1447 56.3955 25.7065 56.3955 27.181Z",fill:"#212433"})),l||(l=c.createElement("path",{opacity:.5,d:"M65.2597 47.7777C60.051 47.7777 55.8018 52.1311 55.8018 57.4675C55.8018 62.8039 60.051 67.1572 65.2597 67.1572C70.4684 67.1572 74.7176 62.8039 74.7176 57.4675C74.7176 52.1311 70.4684 47.7777 65.2597 47.7777ZM65.2597 62.4294C62.5868 62.4294 60.4393 60.2059 60.4393 57.4909C60.4393 54.7525 62.6096 52.5524 65.2597 52.5524C67.9326 52.5524 70.08 54.7759 70.08 57.4909C70.08 60.2059 67.9097 62.4294 65.2597 62.4294Z",fill:"#212433"})),o||(o=c.createElement("path",{opacity:.5,d:"M25.1662 58.3801C22.6761 58.3801 20.6428 60.4632 20.6428 63.0144C20.6428 65.5655 22.6761 67.6486 25.1662 67.6486C27.6563 67.6486 29.6896 65.5655 29.6896 63.0144C29.7124 60.4632 27.6792 58.3801 25.1662 58.3801ZM25.1662 65.2847C23.9554 65.2847 22.9502 64.2782 22.9502 63.0144C22.9502 61.7739 23.9325 60.7441 25.1662 60.7441C26.377 60.7441 27.3822 61.7505 27.3822 63.0144C27.3822 64.2782 26.3998 65.2847 25.1662 65.2847Z",fill:"#212433"})),d||(d=c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_3080_6014",x1:0,y1:0,x2:96,y2:96,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#F0FF00"}),c.createElement("stop",{offset:1,stopColor:"#58CFFB"})))))}const h=c.forwardRef(m),p=n.p+"static/media/logo.63d520f68015fd3b429cce87badf4e5b.svg"},45597:(e,t,n)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return r.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return a.default}});var s=i(n(70854)),r=i(n(98463)),a=i(n(83272));function i(e){return e&&e.__esModule?e:{default:e}}const l=[s.default];t.h0=l},60175:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Background:()=>Rn,Layout:()=>Mn,Page:()=>Dn,__esModule:()=>Bn.X$,logo:()=>Bn.jY,panels:()=>Bn.h0,readme:()=>Bn.ng});var s=n(92950),r=n(55754),a=n(40933),i=n(45055),l=n(94751),o=n(66073),d=n(43785),c=n(8350),u=n(39858),m=n(93253),h=n(4065),p=n(45263);const x=e=>{let{mintAddress:t,amount:n,format:r="0,0.[0000]"}=e;const[i,l]=(0,s.useState)("0"),o=(0,a.useMintDecimals)({mintAddress:t.toString()}),d=(0,s.useCallback)((()=>{const e=h.utilsBN.undecimalize(n,o||9);l(a.util.numeric(e).format(r))}),[n,o,r]);return(0,m.Z)(d,300,[d]),(0,p.jsx)("span",{children:i})},y=(0,s.memo)(x),j=e=>{let{mintAddress:t,format:n="0,0.[0000]"}=e;const{amount:s}=(0,u.$)(t.toString());return(0,p.jsx)(y,{mintAddress:t,amount:s,format:n})},f=(0,s.memo)(j),g=e=>{let{reward:t,index:n,onDelete:r,onChange:i}=e;const{mints:u}=(()=>{const[e,t]=(0,s.useState)([]),n=(0,s.useCallback)((async()=>{const e=new a.SplTokenProvider,n=(await e.getTokenList()).map((e=>{let{address:t}=e;return t}));return t(n)}),[]);return(0,s.useEffect)((()=>{n()}),[n]),{mints:e}})();return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{align:"middle",children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsxs)(l.Typography.Text,{children:["Token #",n+1]})}),0!==n&&(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Button,{onClick:()=>r(n),type:"text",icon:(0,p.jsx)(d.default,{name:"trash-outline"})})})]})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(o.MintSelection,{value:t.mintAddress,mints:u,style:{...G,textAlign:"left"},onChange:e=>i(n,{...t,mintAddress:e})})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Input,{value:t.budget,style:{height:40},placeholder:"Enter budget",name:"budget",onChange:e=>i(n,{...t,budget:e.target.value})})}),c.util.isAddress(t.mintAddress)&&(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,p.jsx)(f,{mintAddress:t.mintAddress}),(0,p.jsx)(o.MintSymbol,{mintAddress:t.mintAddress})]})})})]})},w=e=>{let{tokenRewards:t,setTokenRewards:n}=e;const s=e=>{const s=[...t];return s.splice(e,1),n(s)},r=(e,s)=>{const r=[...t],a={...r[e]};return r[e]={...a,...s},n(r)};return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:5,children:"Rewards"})}),t.map(((e,t)=>(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(g,{onChange:r,reward:e,index:t,onDelete:s})},t))),(0,p.jsx)(l.Col,{span:24}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Button,{size:"large",icon:(0,p.jsx)(d.default,{name:"add-outline"}),type:"dashed",block:!0,onClick:()=>{const e=[...t];return e.push(V),n(e)},children:"Add more"})})]})};var b=n(27906);let C;!function(e){e.Sentre="sentre",e.Staked="staked",e.Your="your",e.All="all"}(C||(C={}));let v;!function(e){e.All="All",e.Staked="Staked Farms",e.Your="Your Farms",e.Expired="Expired Farms",e.Upcoming="Upcoming Farms"}(v||(v={}));const A="MMM DD, YYYY HH:mm",T=new b.BN(10**9);var S=n(4550),k=n.n(S);const N=e=>{let{time:t,onChange:n}=e;return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:12,children:(0,p.jsxs)(l.Space,{direction:"vertical",style:{width:"100%"},children:[(0,p.jsx)(l.Typography.Text,{children:"Start time"}),(0,p.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,p.jsx)(d.default,{name:"time-outline"}),className:"date-option",onChange:e=>n("startAt",(null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:t.startAt?k()(t.startAt):k()(Date.now()),showTime:{showSecond:!1},placement:"bottomRight",format:A,disabledDate:e=>e<k()().startOf("day")})]})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsxs)(l.Space,{direction:"vertical",style:{width:"100%"},children:[(0,p.jsx)(l.Typography.Text,{children:"End time"}),(0,p.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,p.jsx)(d.default,{name:"time-outline"}),className:"date-option",onChange:e=>n("endAt",(null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:t.endAt?k()(t.endAt):void 0,showTime:{showSecond:!1},placement:"bottomRight",format:A,disabledDate:e=>e<k()().startOf("day")})]})})]})},B=e=>{let{onSelect:t,mintAddress:n}=e;const[r,a]=(0,s.useState)(!1),{nftInfo:i,metadata:c}=(0,o.useNftMetaData)(n||"");return(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(l.Button,{onClick:()=>a(!0),size:"large",type:"text",className:"btn-nft",block:!0,children:(0,p.jsxs)(l.Row,{gutter:[8,8],wrap:!1,children:[(0,p.jsx)(l.Col,{flex:"auto",style:{textAlign:"left"},children:n?(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(o.AvatarNFT,{size:24,mintAddress:n}),(0,p.jsx)(l.Typography.Text,{children:(null===i||void 0===i?void 0:i.name)||(null===c||void 0===c?void 0:c.data.data.name)})]}):"Select a collection"}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(d.default,{name:"chevron-down-outline"})})]})}),(0,p.jsx)(l.Modal,{className:"modal-nft-selection",visible:r,footer:!1,onCancel:()=>a(!1),closeIcon:(0,p.jsx)(d.default,{name:"close-outline"}),children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:4,children:"Select a NFT collection"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(o.SearchNFT,{onSelect:e=>(e=>{t(e),a(!1)})(e),searchNFTby:o.searchNFTType.collections})})]})})]})},F=e=>{let{index:t,onDelete:n,boosData:s,onChange:r}=e;return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{align:"middle",children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsxs)(l.Typography.Text,{children:["NFT Collection #",t+1]})}),0!==t&&(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Button,{onClick:()=>n(t),type:"text",icon:(0,p.jsx)(d.default,{name:"trash-outline"})})})]})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(B,{mintAddress:s.collection,onSelect:e=>r(t,{...s,collection:e})})}),(0,p.jsx)(l.Col,{span:12,className:"boost-nft",children:(0,p.jsx)(l.InputNumber,{value:s.percentage,style:{height:40},placeholder:"Enter percentage",name:"budget",onChange:e=>r(t,{...s,percentage:e})})})]})},M={collection:"",percentage:0},R=()=>(0,p.jsxs)(l.Typography.Text,{className:"caption",type:"secondary",children:["Enabling ",(0,p.jsx)("span",{style:{color:"#A0E86F"},children:"Boost"})," means you allow users to lock their NFTs to earn extra rewards. You need to set a boost rate for every NFT collection you will use as Boosters."]}),D=e=>{let{boostsData:t,onChange:n}=e;const[r,a]=(0,s.useState)(!1),i=e=>{const s=[...t];return s.splice(e,1),n(s)},o=(e,s)=>{const r=[...t],a={...r[e]};return r[e]={...a,...s},n(r)};return(0,p.jsxs)(l.Row,{gutter:[12,12],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsx)(l.Typography.Title,{level:5,children:"Boost by NFT"})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Switch,{size:"small",onChange:e=>{n([M]),e||n([]),a(e)}})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(R,{})})]})}),r&&t.map(((e,t)=>(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(F,{onDelete:i,index:t,boosData:e,onChange:o})},t))),r&&(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Button,{size:"large",icon:(0,p.jsx)(d.default,{name:"add-outline"}),type:"dashed",block:!0,onClick:()=>{const e=[...t];return e.push(M),n(e)},children:"Add more"})})]})};const z={appId:"sen_farming_v2",url:"https://descartesnetwork.github.io/sen-farming-v2-app/index.js"},E={development:{...z},production:{...z}};var _=n(38073);const{metadata:{Metadata:P,MetadataData:O}}=_.programs,I=new b.web3.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");const U=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"devnet";this._connection=void 0,this.findDataByOwnerGroupByCollection=async e=>{if(!a.util.isAddress(e))throw new Error("Invalid address!");const t=await P.findDataByOwner(this._connection,e);let n={};return t.forEach((e=>{e.collection&&(n[e.collection.key]=n[e.collection.key]?[...n[e.collection.key],e]:[e])})),n},this.findDataByOwner=async e=>{if(!a.util.isAddress(e))throw new Error("Invalid address!");return await P.findDataByOwner(this._connection,e)},this.getNftMetadata=async e=>{if(!a.util.isAddress(e))throw new Error("Invalid address!");return await P.findByMint(this._connection,e)},this.getListAccountNFTsBelongToCollection=async e=>await this._connection.getProgramAccounts(I,{commitment:"confirmed",filters:[{dataSize:679},{memcmp:{offset:368,bytes:e}}]}),this.isNftBelongsToCollection=async(e,t)=>{var n;return(null===(n=(await P.findByMint(this._connection,e)).data.collection)||void 0===n?void 0:n.key)===t},this._connection=new _.Connection(e,"confirmed")}},$={devnet:{node:"https://api.devnet.solana.com",senFarmingProgram:"6LaxnmWdYUAJvBJ4a1R8rrsvCRtaY7b43zKiNAU2k3Nx",metaplexNFT:new U(a.rpc)},testnet:{node:"https://api.testnet.solana.com",senFarmingProgram:"6LaxnmWdYUAJvBJ4a1R8rrsvCRtaY7b43zKiNAU2k3Nx",metaplexNFT:new U(a.rpc)},mainnet:{node:"https://api.mainnet-beta.solana.com",senFarmingProgram:"E6Vc9wipgm8fMXHEYwgN7gYdDbyvpPBUiTNy67zPKuF4",metaplexNFT:new U(a.rpc)}},Z={manifest:E[a.env],sol:$[a.net]},{manifest:{appId:H}}=Z,L=`/app/${H}`,Y=()=>{const{search:e,pathname:t}=(0,i.useLocation)(),n=(0,i.useHistory)(),r=(0,i.useParams)(),a=(0,s.useMemo)((()=>new URLSearchParams(e)),[e]),l=(0,s.useCallback)((e=>r[e]?r[e]:""),[r]),o=(0,s.useCallback)((e=>{const t=a.get(e);return t||""}),[a]),d=(0,s.useCallback)((()=>{const e={};a.forEach(((t,n)=>{e[n]=t}));return e}),[a]),c=(0,s.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=d();!1===s&&(t=Object.assign(r,t));const a=new URLSearchParams(t);a&&(e+=`?${a.toString()}`),n.push(`${L}${e}`)}),[d,n]);return{getQuery:o,getAllQuery:d,pushHistory:c,appRoute:L,pathname:t,getIdFromUrl:l}};n(95418);const{sol:{metaplexNFT:q}}=Z,K=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(a.util.explorer(t),"_blank")}),W=e=>window.notify({type:"error",description:e.message}),G={padding:"4px 12px",height:40,width:"100%",background:"#0A0A0A"},V={mintAddress:"",budget:""},X=()=>{const[e,t]=(0,s.useState)([V]),[n,r]=(0,s.useState)([]),[i,d]=(0,s.useState)(""),[c,u]=(0,s.useState)({startAt:0,endAt:0}),{initializeFarm:m,loading:x}=(()=>{const[e,t]=(0,s.useState)(!1),n=(0,a.useGetMintDecimals)(),{to:r}=(0,a.useAppRoute)(Z.manifest.appId);return{initializeFarm:(0,s.useCallback)((async e=>{let{inputMint:s,startAt:a,endAt:i,tokenRewards:l,boostsData:o}=e;try{t(!0);const e=window.senFarming,d=window.senFarming.provider,c=new b.web3.PublicKey(s),u=(new Date).getTime();let m=0;a>u&&(m=Math.floor((a-u)/1e3));const p=Math.floor((i-u)/1e3);let x=b.web3.Keypair.generate();const{tx:y}=await e.initializeFarm({inputMint:c,startAfter:m+10,endAfter:p,sendAndConfirm:!1,farmKeypair:x}),j=new b.web3.Transaction;await Promise.all(o.map((async t=>{let{collection:n,percentage:s}=t;const{tx:r}=await e.pushFarmBoostingCollection({farm:x.publicKey,collection:n,coefficient:new b.BN(s/100*T.toNumber()),sendAndConfirm:!1});j.add(r)})));const f=new b.web3.Transaction;await Promise.all(l.map((async t=>{let{mintAddress:s,budget:r}=t;const a=await n({mintAddress:s});if(!a)throw new Error("Can't find mint decimals");const i=h.utilsBN.decimalize(r,a),{tx:l}=await e.pushFarmReward({farm:x.publicKey,rewardMint:s,rewardAmount:i,sendAndConfirm:!1});f.add(l)})));const g=[{tx:y,signers:[x]},{tx:j,signers:[]},{tx:f,signers:[]}],w=await d.sendAll(g);K("Initialize farm",w[0]),setTimeout((()=>{r(`/${x.publicKey}`)}),300)}catch(d){W(d)}finally{t(!1)}}),[n,r]),loading:e}})(),{pushHistory:y}=Y(),j=(0,s.useMemo)((()=>{if(!a.util.isAddress(i))return"Select input mint";if(!Number(c.endAt))return"Select end time";for(const t of e){if(!a.util.isAddress(t.mintAddress))return"Select reward mint";if(!Number(t.budget))return"Enter budget amount"}for(const e of n){if(!a.util.isAddress(e.collection))return"Select NFT collection";if(!Number(e.percentage))return"Enter NFT coefficient"}}),[n,i,c.endAt,e]);return(0,p.jsx)(l.Row,{justify:"center",children:(0,p.jsx)(l.Col,{xs:24,md:12,lg:10,children:(0,p.jsx)(l.Card,{bordered:!1,children:(0,p.jsxs)(l.Row,{gutter:[32,32],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:4,children:"New Farm"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{direction:"vertical",style:{width:"100%"},children:[(0,p.jsx)(l.Typography.Title,{level:5,children:"Input"}),(0,p.jsx)(o.MintSelection,{value:i,onChange:d,style:{...G,textAlign:"left"},placeholder:"Select LP token"})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(w,{tokenRewards:e,setTokenRewards:t})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(N,{time:c,onChange:(e,t)=>u({...c,[e]:t})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(D,{onChange:r,boostsData:n})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Button,{onClick:()=>y("/farms"),size:"large",ghost:!0,block:!0,children:"Cancel"})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Button,{size:"large",type:"primary",onClick:async()=>{await m({inputMint:i,startAt:c.startAt,endAt:c.endAt,boostsData:n,tokenRewards:e})},block:!0,disabled:!!j,loading:x,children:j||"Add"})})]})})})})},J=e=>{let{children:t}=e;return(0,p.jsx)(l.Row,{justify:"center",children:(0,p.jsx)(l.Col,{style:{maxWidth:1140,width:"100%"},children:t})})};var Q=n(24331),ee=n(68429);const te=e=>(0,r.useSelector)((t=>t.farms[e])),ne=e=>{const t=(e=>{const[t,n]=(0,s.useState)(""),r=(0,s.useCallback)((async()=>{if(!a.util.isAddress(e))return n("");const t=await window.senFarming.deriveAllPDAs({farm:e});return n(t.debt.toBase58())}),[e]);return(0,s.useEffect)((()=>{r()}),[r]),t})(e),{debts:{[t]:n}}=(0,r.useSelector)((e=>e));return n},se=e=>{const t=(0,r.useSelector)((e=>e.rewards));return(0,s.useMemo)((()=>Object.values(t).filter((t=>t.farm.toBase58()===e))),[e,t])},re=e=>{const t=ne(e),n=(0,s.useCallback)((e=>{if(null===t||void 0===t||!t.leverage)return new b.BN(0);return e.mul(t.leverage).div(T)}),[null===t||void 0===t?void 0:t.leverage]),r=(0,s.useCallback)((e=>{if(null===t||void 0===t||!t.leverage)return new b.BN(0);return e.mul(T).div(t.leverage)}),[null===t||void 0===t?void 0:t.leverage]),a=(0,s.useCallback)(((e,t,n,s)=>{let r=new b.BN(e),a=new b.BN(n),i=new b.BN(s),l=new b.BN(t),o=new b.BN(T);return r.mul(a).add(i).mul(l).div(o)}),[]),i=(0,s.useCallback)(((e,n,s,r)=>{if(null===t||void 0===t||!t.debtAmount)return new b.BN(0);let a=new b.BN(e),i=new b.BN(s),l=new b.BN(r),o=new b.BN(n),d=new b.BN(T),c=new b.BN(t.debtAmount);return a.mul(i).add(l).mul(o).div(d).sub(c)}),[null===t||void 0===t?void 0:t.debtAmount]);return(0,s.useMemo)((()=>({deposit:n,withdraw:r,next_debt_amount:a,get_rewards:i})),[n,i,a,r])},ae=e=>{const t=te(e),n=(0,s.useCallback)((()=>t.endDate.sub(t.startDate)),[t.endDate,t.startDate]),r=(0,s.useCallback)((async()=>{let e=await(async()=>new b.BN((new Date).getTime()/1e3))(),s=n();return e.lte(t.startDate)?new b.BN(0):e.gte(t.endDate)?s:e.sub(t.startDate)}),[n,t.endDate,t.startDate]),a=(0,s.useCallback)((()=>{let e=n();return t.totalRewards.div(e)}),[n,t.totalRewards]),i=(0,s.useCallback)((e=>{let t=a();if(e.isZero()){return t.mul(T)}return t.mul(T).div(e)}),[a]),l=(0,s.useCallback)((()=>{let e=n(),t=i(new b.BN(0));return e.mul(t)}),[i,n]),o=(0,s.useCallback)(((e,n,s)=>{let r=new b.BN(0);if(n.gte(s)){let a=n.sub(s).mul(e);r=t.compensation.add(a)}else{let a=s.sub(n).mul(e);r=t.compensation.sub(a)}return r}),[t.compensation]);return(0,s.useMemo)((()=>({get_lifetime:n,get_time_passed:r,get_velocity:a,get_emission_rate:i,get_max_compenstation:l,next_compenstation:o})),[i,n,l,r,a,o])},ie=e=>{const t=ne(e),n=te(e),r=re(e),a=ae(e);return(0,s.useCallback)((async()=>{if(!t)return new b.BN(0);let e=t.shares,s=await a.get_time_passed(),i=a.get_emission_rate(n.totalShares),l=r.get_rewards(s,e,i,n.compensation);return t.pendingRewards.add(l)}),[t,r,n.compensation,n.totalShares,a])},le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;const[n,r]=(0,s.useState)(new b.BN(0)),a=ie(e),i=se(e),l=te(e),o=ne(e),d=(0,s.useCallback)((async()=>{const e=await a();r(e.div(new b.BN(10**9)))}),[a]);(0,s.useEffect)((()=>{if(t&&null!==o&&void 0!==o&&o.shares.gt(new b.BN(0))){const e=setInterval((()=>d()),t);return()=>clearInterval(e)}d()}),[null===o||void 0===o?void 0:o.shares,t,d]);const c=(0,s.useMemo)((()=>i.map((e=>({mint:e.rewardMint.toBase58(),amount:n.mul(e.totalRewards).mul(T).div(l.totalRewards)})))),[l.totalRewards,i,n]);return c},oe={},de={},ce=()=>{const e=(0,a.useGetMintDecimals)(),t=ue();return(0,s.useCallback)((async(n,s)=>{try{const r=await t(n);if(!r)return 0;const a=await e({mintAddress:n.toString()}),i=h.utilsBN.undecimalize(s,a||0);return Number(i)*r}catch(r){return 0}}),[e,t])},ue=()=>(0,s.useCallback)((async e=>{try{var t;if(oe[e.toString()])throw new Error("");const n=await a.tokenProvider.findByAddress(e),s=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId;return(await a.util.fetchCGK(s)).price}catch(n){oe[e.toString()]=!0;try{if(de[e.toString()])throw new Error("");return await(async e=>{const t=`https://quote-api.jup.ag/v1/quote?inputMint=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&outputMint=${e}&amount=1000000&slippage=1`,{data:n}=await a.DataLoader.load("getJupiterPrice"+e,(async()=>(await fetch(t)).json())),s=await a.tokenProvider.findByAddress(e),r=await h.utilsBN.undecimalize(new b.BN(n[0].outAmount),(null===s||void 0===s?void 0:s.decimals)||0);return 1/Number(r)})(e.toString())}catch(n){return de[e.toString()]=!0,0}}}),[]),me=()=>{const e=(0,r.useSelector)((e=>e.debts)),[t,{set:n}]=(0,Q.Z)({}),i=(0,a.useWalletAddress)(),l=(0,s.useMemo)((()=>Object.values(e).filter((e=>e.authority.toBase58()===i&&!e.shares.isZero()))),[e,i]),o=Object.values(t).reduce(((e,t)=>e+t),0),d=Object.values(t).length===l.length;return(0,p.jsxs)("span",{children:[a.util.numeric(o).format("$0,0.[00]"),l.map((e=>(0,p.jsx)(pe,{farmAddress:e.farm.toBase58(),upset:n,msReload:d&&o?5e3:300},e.farm.toBase58())))]})},he=(0,s.memo)(me),pe=(0,s.memo)((e=>{let{farmAddress:t,upset:n,msReload:r}=e;const a=le(t,r),i=ce(),l=(0,s.useCallback)((async()=>{let e=0;return await Promise.all(a.map((async t=>{const n=await i(t.mint,t.amount);e+=n}))),n(t,e)}),[a,t,i,n]);return(0,ee.Z)(l,r),(0,p.jsx)(s.Fragment,{})})),xe=n.p+"static/media/mining.c2bd06577dd01b9c351e.png";const ye=[n.p+"static/media/token-1.c55800e9fdf4d95e5b29c9e4e015b55c.svg",n.p+"static/media/token-2.4e32fd5955e9fc581eba7c754bef579e.svg"],je=()=>(0,p.jsx)("div",{className:"wrap-animation mining",children:ye.map(((e,t)=>(0,p.jsx)("div",{className:`item-bounce bounce-${t+1}`,children:(0,p.jsx)("img",{src:e,alt:`coin-${t}`})},t)))}),fe={color:"inherit"},ge={color:"#141413"},we=()=>{const e=(()=>{const e=(0,r.useSelector)((e=>e.farms)),[t,n]=(0,s.useState)(0),a=ce(),i=(0,s.useCallback)((async()=>{let t=0;return await Promise.all(Object.values(e).map((async e=>{let{totalShares:n,inputMint:s}=e;if(n.isZero())return;const r=await a(s.toString(),n);t+=r}))),n(t)}),[e,a]);return(0,m.Z)(i,500,[i]),t})(),{ui:{width:t}}=(0,a.useUI)(),n=t<575?"center":"end";return(0,p.jsx)(l.Card,{className:"banner",bordered:!1,style:{overflow:"hidden"},bodyStyle:{padding:"24px 32px"},children:(0,p.jsxs)(l.Row,{gutter:[24,24],style:{...ge},justify:n,children:[(0,p.jsx)(l.Col,{xs:{order:2,span:24},sm:{order:1,span:24},children:(0,p.jsx)(l.Typography.Title,{level:2,style:{...fe},children:"Sen Farming V2"})}),(0,p.jsx)(l.Col,{xs:{order:3,span:24},sm:{order:3,span:24},children:(0,p.jsxs)(l.Space,{size:64,children:[(0,p.jsxs)(l.Space,{direction:"vertical",children:[(0,p.jsx)(l.Typography.Text,{style:{...fe},children:"Total Value Locked"}),(0,p.jsx)(l.Typography.Title,{level:3,style:{...fe},children:a.util.numeric(e).format("$0,0.[00]")})]}),(0,p.jsxs)(l.Space,{direction:"vertical",children:[(0,p.jsx)(l.Typography.Text,{style:{...fe},children:"Your Total Rewards"}),(0,p.jsx)(l.Typography.Title,{level:3,style:{...fe},children:(0,p.jsx)(he,{})})]})]})}),(0,p.jsx)(l.Col,{xs:{order:1},sm:{order:4},children:(0,p.jsx)("div",{className:"icon-banner",children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Image,{src:xe,preview:!1}),(0,p.jsx)(je,{})]})})})]})})},be=e=>{let{floatContent:t,children:n,align:s="middle",wrap:r=!0,gutter:a,style:i,childFlex:o}=e;return(0,p.jsxs)(l.Row,{gutter:a,align:s,wrap:r,children:[(0,p.jsx)(l.Col,{flex:"auto",style:{...i},children:n}),!!t&&(0,p.jsx)(l.Col,{flex:o,children:t})]})};var Ce=n(19289);let ve;!function(e){e.ASC="ASC",e.DESC="DESC",e.null="null"}(ve||(ve={}));const Ae="main",Te={searchKey:"",sortType:{liquidity:ve.null,apr:ve.ASC},farmTab:v.All,boostOnly:!1},Se=(0,Ce.createAsyncThunk)("main/setSearchKey",(async e=>({searchKey:e}))),ke=(0,Ce.createAsyncThunk)("main/setSort",(async e=>({sortType:e}))),Ne=(0,Ce.createAsyncThunk)("main/setFarmTab",(async e=>({farmTab:e}))),Be=(0,Ce.createAsyncThunk)("main/switchBoostOnly",(async(e,t)=>{let{getState:n}=t;const{main:{boostOnly:s}}=n();return{boostOnly:!s}})),Fe=(0,Ce.createSlice)({name:Ae,initialState:Te,reducers:{},extraReducers:e=>{e.addCase(Se.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)})).addCase(ke.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)})).addCase(Be.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)})).addCase(Ne.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,Me=()=>{const e=(0,r.useSelector)((e=>e.main.farmTab)),t=(0,r.useDispatch)();return(0,p.jsx)("div",{style:{overflowX:"auto"},children:(0,p.jsx)(l.Segmented,{options:[{value:v.All,label:v.All},{value:v.Staked,label:v.Staked},{value:v.Your,label:v.Your},{value:v.Expired,label:v.Expired},{value:v.Upcoming,label:v.Upcoming}],value:e,onChange:e=>t(Ne(e.toString()))})})},Re=e=>{let{placeholder:t="Search by name, address"}=e;const n=(0,r.useDispatch)();return(0,p.jsx)(l.Card,{bordered:!1,bodyStyle:{padding:"2px 12px"},style:{background:"#0A0A0A",borderRadius:8},children:(0,p.jsxs)(l.Space,{style:{width:"100%"},children:[(0,p.jsx)(d.default,{name:"search-outline"}),(0,p.jsx)(l.Input,{bordered:!1,style:{width:"100%"},placeholder:t,onChange:e=>n(Se(e.target.value))})]})})},De={ASC:{up:"#727272",down:"#F3F3F3"},DESC:{up:"#F3F3F3",down:"#727272"},null:{up:"#727272",down:"#727272"}},ze=e=>{let{type:t}=e;const n=De[t];return(0,p.jsxs)(l.Row,{style:{flexDirection:"column"},children:[(0,p.jsx)(l.Col,{style:{height:10},children:(0,p.jsx)(d.default,{style:{fontSize:12,color:n.up},name:"caret-up-outline"})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(d.default,{style:{fontSize:12,color:n.down},name:"caret-down-outline"})})]})},Ee=()=>{const e=(0,r.useDispatch)(),t=(0,r.useSelector)((e=>e.main.sortType)),n=(0,r.useSelector)((e=>e.main.boostOnly));return(0,p.jsxs)(l.Row,{gutter:[16,16],align:"middle",children:[(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Space,{size:6,children:[(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Sort by:"}),(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,background:"transparent"},onClick:()=>{const n=t.liquidity===ve.ASC?ve.DESC:ve.ASC;e(ke({liquidity:n,apr:ve.null}))},children:"Liquidity"}),(0,p.jsx)(ze,{type:t.liquidity})]}),(0,p.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,background:"transparent"},onClick:()=>{const n=t.apr===ve.ASC?ve.DESC:ve.ASC;e(ke({liquidity:ve.null,apr:n}))},children:"APR"}),(0,p.jsx)(ze,{type:t.apr})]})]})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)("label",{style:{cursor:"pointer"},children:(0,p.jsxs)(l.Space,{size:6,children:[(0,p.jsx)(l.Typography.Text,{style:{userSelect:"none"},children:"Boost only"}),(0,p.jsx)(l.Switch,{size:"small",checked:n,onChange:()=>e(Be())})]})})})]})},_e=()=>(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{xs:24,md:8,children:(0,p.jsx)(Re,{})}),(0,p.jsx)(l.Col,{flex:1,children:(0,p.jsx)(Ee,{})})]});var Pe=n(58421),Oe=n(48744),Ie=n.n(Oe);const Ue=e=>{const[t,n]=(0,s.useState)(0),{inputMint:r,totalShares:a}=te(e),i=ce(),l=(0,s.useCallback)((async()=>{const e=await i(r.toString(),a);return n(e)}),[i,r,a]);return(0,s.useEffect)((()=>{l()}),[l]),t},$e=e=>{let{farmAddress:t}=e;const n=(e=>{const[t,n]=(0,s.useState)(0),r=Ue(e)||10,a=ce(),i=se(e),l=ae(e),o=(0,s.useCallback)((async()=>{if(!r)return n(0);let e=0;for(const t of i){const{rewardMint:n,totalRewards:s}=t,r=s.mul(new(Ie())(86400)).div(l.get_lifetime());e+=await a(n,r)}return n(e/r)}),[l,a,r,i]);return(0,s.useEffect)((()=>{o()}),[o]),356*t})(t);return(0,p.jsx)("span",{children:a.util.numeric(n).format("0,0.[00]%")})},Ze=e=>{let{farmAddress:t}=e;const n=Ue(t);return(0,p.jsx)("span",{children:a.util.numeric(n).format("$0,0.[00]a")})},He=e=>{let{farmAddress:t}=e;const n=se(t);return(0,p.jsx)(l.Space,{size:4,children:n.map((e=>(0,p.jsx)(o.MintAvatar,{mintAddress:e.rewardMint},e.rewardMint.toBase58())))})};var Le=n(51518),Ye=n.n(Le);const qe=e=>{let{title:t="",address:n=""}=e;const[r,i]=(0,s.useState)(!1);return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:10,children:(0,p.jsxs)(l.Space,{align:"baseline",children:[(0,p.jsx)(d.default,{style:{fontSize:16},name:"alert-circle-outline"}),(0,p.jsx)(l.Typography.Text,{children:t})]})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsxs)(l.Typography.Text,{children:[n," "]})}),(0,p.jsx)(l.Col,{span:2,children:(0,p.jsx)(l.Tooltip,{title:"Copied",visible:r,children:(0,p.jsx)(Ye(),{text:n,children:(0,p.jsx)(l.Button,{style:{width:"auto",height:"auto",padding:0,background:"transparent"},type:"text",icon:(0,p.jsx)(d.default,{name:"copy-outline"}),onClick:async e=>{e.stopPropagation(),i(!0),await a.util.asyncWait(500),i(!1)}})})})})]})},Ke=e=>{let{farmAddress:t="",inputMint:n=""}=e;const[r,a]=(0,s.useState)(!1);return(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(l.Button,{type:"text",style:{width:"auto",height:"auto",padding:0,background:"transparent"},onClick:e=>{e.stopPropagation(),a(!0)},icon:(0,p.jsx)(d.default,{name:"information-circle-outline",className:"icon-describe"})}),(0,p.jsx)(l.Modal,{visible:r,onCancel:e=>{e.stopPropagation(),a(!1)},footer:!1,closable:!1,children:(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(qe,{title:"Farming Address:",address:t})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(qe,{title:"Staking mint address:",address:n})})]})})]})},We=e=>{let{farmAddress:t,size:n=44,textStyle:s,hoverable:r=!1,spacing:a=8}=e;const{inputMint:i}=te(t)||{};return(0,p.jsxs)(l.Space,{size:12,children:[(0,p.jsx)(o.MintAvatar,{size:n,mintAddress:i}),(0,p.jsxs)(l.Space,{size:a,children:[(0,p.jsx)(l.Typography.Text,{style:{...s},children:(0,p.jsx)(o.MintSymbol,{mintAddress:i})}),r&&(0,p.jsx)(Ke,{farmAddress:t,inputMint:i.toBase58()})]})]})},Ge=e=>{let{farmAddress:t}=e;const[n,r]=(0,s.useState)(0),i=le(t,1e3),l=ce(),o=(0,s.useCallback)((async()=>{let e=0;return await Promise.all(i.map((async t=>{const n=await l(t.mint,t.amount);e+=n}))),r(e)}),[i,l]);return(0,s.useEffect)((()=>{o()}),[o]),(0,p.jsx)("span",{children:a.util.numeric(n).format("$0,0.[00]")})},Ve=e=>{let{mintAddress:t,amount:n,format:r="$0,0.[0000]"}=e;const[i,l]=(0,s.useState)("$0"),o=ce(),d=(0,s.useCallback)((async()=>{const e=await o(t,n);return l(a.util.numeric(e).format(r))}),[n,r,o,t]);return(0,m.Z)(d,300,[d]),(0,p.jsx)("span",{children:i})},Xe=(0,s.memo)(Ve),Je=e=>{let{farmAddress:t}=e;const n=le(t);return n.length?(0,p.jsx)(l.Card,{bordered:!1,style:{background:"transparent"},bodyStyle:{padding:4},children:(0,p.jsx)(l.Row,{gutter:[8,8],children:(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Space,{direction:"vertical",style:{width:"100%"},children:n.map((e=>{let{mint:t,amount:n}=e;return(0,p.jsx)(be,{floatContent:(0,p.jsxs)(l.Typography.Title,{level:5,children:[(0,p.jsx)(y,{mintAddress:t,amount:n})," ",(0,p.jsxs)("span",{style:{color:"#A1A1A1"},children:["(",(0,p.jsx)(Xe,{mintAddress:t,amount:n}),")"]})]}),gutter:[24,24],children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(o.MintAvatar,{mintAddress:t}),(0,p.jsx)(o.MintSymbol,{mintAddress:t})]})},t)}))})})})}):(0,p.jsx)(l.Typography.Text,{children:"No Data."})},Qe=e=>{let{farmAddress:t,lastSeparator:n="and",separator:r=","}=e;const a=se(t),i=(0,s.useMemo)((()=>a.map((e=>{let{rewardMint:t}=e;return t.toBase58()}))),[a]);return(0,p.jsx)("span",{children:i.map(((e,t)=>{const a=2===i.length?n:r;return(0,p.jsxs)(s.Fragment,{children:[t>0&&`${a} `,(0,p.jsx)(o.MintSymbol,{mintAddress:e})]},e)}))})},et=e=>{let{farmAddress:t,background:n="#2D2E2D",style:r,bodyStyle:a,bordered:i=!1,gutter:d=[12,12],titleHeight:c=41,size:u=24,align:m="top"}=e;const h=ae(t),x=se(t),j=(0,s.useMemo)((()=>x.map((e=>{const t=e.totalRewards.mul(new b.BN(604800)).div(h.get_lifetime());return{mint:e.rewardMint,amount:t,total:e.totalRewards}}))),[h,x]);return(0,p.jsx)(l.Card,{bordered:i,style:{height:"100%",background:n,...r},bodyStyle:{...a},children:(0,p.jsxs)(l.Row,{gutter:d,children:[(0,p.jsx)(l.Col,{children:(0,p.jsx)(be,{floatContent:(0,p.jsx)(l.Col,{span:24,style:{height:c}}),children:(0,p.jsx)(l.Typography.Text,{children:"Farm rewards"})})}),j.map(((e,t)=>{let{mint:n,amount:s,total:r}=e;return(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{floatContent:(0,p.jsxs)(l.Space,{size:0,direction:"vertical",style:{textAlign:"right"},children:[(0,p.jsx)(l.Typography.Title,{level:5,children:(0,p.jsx)(y,{mintAddress:n,amount:r,format:"0,0.[00]"})}),(0,p.jsxs)(l.Typography.Text,{type:"secondary",children:[(0,p.jsx)(y,{mintAddress:n,amount:s,format:"0,0.[00]"})," / Week"]})]}),align:m,children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(o.MintAvatar,{size:u,mintAddress:n}),(0,p.jsx)(o.MintSymbol,{mintAddress:n})]})})},n.toBase58()+t)}))]})})},tt=e=>{let{farmAddress:t}=e;return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(et,{background:"transparent",bodyStyle:{padding:4},farmAddress:t,gutter:[8,8],titleHeight:0,size:32,align:"middle"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Divider,{style:{margin:4}})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Typography.Text,{children:["To get ",(0,p.jsx)(Qe,{farmAddress:t}),"rewards, you need to join the pool by participating in the liquidity offering. Rewards will be distributed weekly."]})})]})},nt=e=>{let{farmAddress:t,size:n="middle"}=e;const{loading:r,harvest:a}=(e=>{const[t,n]=(0,s.useState)(!1);return{harvest:(0,s.useCallback)((async()=>{try{n(!0);const t=new b.web3.Transaction,{tx:s}=await window.senFarming.unstake({farm:e,sendAndConfirm:!1});t.add(s);const{tx:r}=await window.senFarming.stake({farm:e,sendAndConfirm:!1});t.add(r);const{tx:a}=await window.senFarming.claim({farm:e,sendAndConfirm:!1});t.add(a);const{tx:i}=await window.senFarming.convertRewards({farm:e,sendAndConfirm:!1}),l=window.senFarming.provider,o=await l.sendAll([{tx:t},{tx:i}]);K("Harvested",o[1])}catch(t){W(t)}finally{n(!1)}}),[e]),loading:t}})(t),[i,o]=(0,s.useState)(!0),d=le(t),c=(0,s.useCallback)((()=>{var e;const t=!(null!==(e=d[0])&&void 0!==e&&e.amount.isZero());o(!t)}),[d]);return(0,s.useEffect)((()=>{c()}),[c]),(0,p.jsx)(l.Button,{size:n,loading:r,onClick:e=>(e.stopPropagation(),a()),block:!0,type:"primary",disabled:i,children:"Harvest"})},st=e=>{let{children:t,tooltip:n}=e;return(0,p.jsx)(l.Tooltip,{title:n,children:t})},rt={primary:"#a0e86f",warning:"#f0ff00"},at=e=>{let{type:t="primary",style:n,radius:r=6,children:a,bordered:i=!0,opacity:o=0,color:d}=e;const c=d||rt[t],u=i?{border:`1px solid ${c}`}:{border:"none"},m=(0,s.useMemo)((()=>{let e="transpanrent";return c.startsWith("rgb")&&(e=(e=>{const[t,n,s]=e.split(",");return`#16777216${Number(t)<<16}${Number(n)<<8}${s}`})(c)),c.startsWith("#")&&(e=((e,t)=>{const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?`rgb(${new Array(3).fill("").map(((e,t)=>parseInt(n[t+1],16))).join(",")}, ${t})`:e})(c,o)),{background:e}}),[o,c]);return(0,p.jsx)(l.Tag,{style:{color:c,borderColor:c,borderRadius:r,marginRight:0,...m,...u,...n},children:a})},it=e=>{const[t,n]=(0,s.useState)([]),a=(0,r.useSelector)((e=>e.boosting)),i=(0,s.useCallback)((()=>{const t=[];Object.keys(a).filter((t=>a[t].farm.toBase58()===e)).map((e=>t.push(a[e]))),n(t)}),[e,a]);return(0,s.useEffect)((()=>{i()}),[i]),t},lt=e=>{let{children:t,style:n}=e;return(0,p.jsx)(l.Tag,{style:{background:"#141413",border:"none",borderRadius:4,marginRight:0,...n},children:t})},ot=(0,s.memo)((e=>{let{endTime:t,label:n}=e;const r=Math.floor(Date.now()/1e3),a=Date.now()/1e3,i=k().duration(t-r,"seconds"),[o,d]=(0,s.useState)({days:Math.floor(i.asDays()),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),c=(0,s.useCallback)((async()=>{if(!t||t<a)return;const e=k().duration(t-r,"seconds"),n=Math.floor(e.asDays()),s=e.hours(),i=e.minutes(),l=e.seconds();d({days:n,hours:s,minutes:i,seconds:l})}),[t,a,r]);return(0,s.useEffect)((()=>{const e=setInterval((()=>c()),1e3);return()=>clearInterval(e)}),[c]),t?t<a?(0,p.jsx)(lt,{children:(0,p.jsx)(l.Typography.Text,{children:"Expired"})}):(0,p.jsxs)(l.Space,{size:6,children:[!!n&&(0,p.jsx)(l.Typography.Text,{type:"secondary",children:n}),(0,p.jsxs)(l.Space,{size:4,children:[!!o.days&&(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(lt,{children:(0,p.jsxs)(l.Typography.Text,{children:[o.days,"d"]})}),":"]}),(0,p.jsx)(lt,{children:(0,p.jsxs)(l.Typography.Text,{children:[o.hours,"h"]})}),":",(0,p.jsx)(lt,{children:(0,p.jsxs)(l.Typography.Text,{children:[o.minutes,"m"]})}),!o.days&&(0,p.jsxs)(s.Fragment,{children:[":",(0,p.jsx)(lt,{children:(0,p.jsxs)(l.Typography.Text,{children:[o.seconds,"s"]})})]})]})]}):(0,p.jsx)(l.Typography.Text,{children:"Unlimited"})})),dt={D4qkfuXJUXuPUwta349c9U2ThDHnaJsEjnCAb3gLSmqi:{url:"https://hub.sentre.io/app/balansol/swap?bid_mint=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&ask_mint=xALGoH1zUfRmpCriy94qbfoMXHtK6NDnMKzT4Xdvgms"},FxV5pG3H5VjLqhFxtMXJbiRZKdC7BTkv4dd2CWpVXWq8:{url:"https://hub.sentre.io/app/balansol/swap?bid_mint=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&ask_mint=SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M"}},ct=e=>{let{farmAddress:t}=e;const{to:n}=(0,a.useAppRoute)(Z.manifest.appId),r=it(t),i=ie(t),{endDate:o,startDate:c}=te(t),[u,m]=(0,s.useState)(new b.BN(0)),h=(0,s.useMemo)((()=>{if(!o||!c)return 0;const e=1e3*o.toNumber(),t=1e3*c.toNumber(),n=Date.now();return e<n?100:(n-t)/(e-t)*100}),[o,c]),x=(0,s.useCallback)((async()=>{const e=await i();m(e)}),[i]);(0,s.useEffect)((()=>{x()}),[x]);const y=new b.BN(Date.now()/1e3),j=dt[t];return(0,p.jsx)(l.Card,{bodyStyle:{padding:"20px 16px"},hoverable:!0,bordered:!1,onClick:()=>n(`/${t}`),children:(0,p.jsxs)(l.Row,{gutter:[20,20],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[8,8],align:"middle",children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{floatContent:(0,p.jsxs)(l.Space,{children:[y.lt(c)&&(0,p.jsxs)(at,{type:"warning",bordered:!1,opacity:.1,radius:8,style:{padding:"1px 8px"},children:[(0,p.jsx)(d.default,{name:"alarm-outline"})," Upcoming"]}),!!r.length&&(0,p.jsx)(at,{type:"primary",bordered:!1,opacity:.1,radius:8,style:{padding:"1px 8px"},children:"\u26a1 Boost"})]}),children:(0,p.jsx)(We,{farmAddress:t,textStyle:{fontSize:20,fontWeight:700}})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{floatContent:(0,p.jsxs)(l.Space,{children:[y.lt(c)?(0,p.jsx)(ot,{label:"Start in",endTime:c.toNumber()}):(0,p.jsx)(ot,{label:"End in",endTime:o.toNumber()}),(0,p.jsx)(l.Progress,{type:"circle",percent:h,showInfo:100===h,className:"end-time-progress",strokeWidth:10})]}),children:(0,p.jsxs)(l.Button,{type:"text",style:{padding:0,background:"transparent"},disabled:!j,onClick:j?e=>{window.open(`${j.url}`),e.stopPropagation()}:()=>{},children:["Go to Pool ",(0,p.jsx)(d.default,{name:"open-outline"})]})})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{justify:"space-between",children:[(0,p.jsx)(l.Col,{children:(0,p.jsx)(st,{tooltip:(0,p.jsx)(tt,{farmAddress:t}),children:(0,p.jsxs)(l.Space,{direction:"vertical",children:[(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"APR"}),(0,p.jsx)(d.default,{name:"information-circle-outline",className:"icon-describe"})]}),(0,p.jsx)(l.Typography.Title,{level:5,style:{color:"#a0e86f"},children:(0,p.jsx)($e,{farmAddress:t})}),(0,p.jsx)(He,{farmAddress:t})]})})}),(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Space,{direction:"vertical",children:[(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"TVL"}),(0,p.jsx)(l.Typography.Text,{children:(0,p.jsx)(Ze,{farmAddress:t})})]})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(st,{tooltip:(0,p.jsx)(Je,{farmAddress:t}),children:(0,p.jsxs)(l.Space,{direction:"vertical",children:[(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Your rewards"}),(0,p.jsx)(d.default,{name:"information-circle-outline",className:"icon-describe"})]}),(0,p.jsx)(l.Typography.Title,{level:5,children:(0,p.jsx)(Ge,{farmAddress:t})}),!u.isZero()&&(0,p.jsx)(nt,{size:"small",farmAddress:t})]})})})]})})]})})},ut=(0,s.memo)(ct);const mt="farms",ht=(0,Ce.createAsyncThunk)("farms/initFarms",(async e=>e)),pt=(0,Ce.createAsyncThunk)("farms/upsetFarm",(async e=>{let{address:t,data:n}=e;if(!a.util.isAddress(t))throw new Error("Invalid farm address");if(!n)throw new Error("Data is empty");return{[t]:n}})),xt=((0,Ce.createAsyncThunk)("farms/getFarm",(async(e,t)=>{let{address:n}=e,{getState:s}=t;const{farms:{[n]:r}}=s();return{[n]:r}})),(0,Ce.createAsyncThunk)("farms/getFarms",(async(e,t)=>{let{getState:n}=t;const{farms:s}=n();return s}))),yt=(0,Ce.createSlice)({name:mt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(ht.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)})).addCase(pt.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,jt="rewards",ft=(0,Ce.createAsyncThunk)("rewards/initRewards\n  ",(async e=>e)),gt=(0,Ce.createAsyncThunk)("rewards/upsetReward",(async e=>{let{address:t,data:n}=e;if(!a.util.isAddress(t))throw new Error("Invalid reward address");if(!n)throw new Error("Data is empty");return{[t]:n}})),wt=(0,Ce.createAsyncThunk)("rewards/getRewards",(async(e,t)=>{let{getState:n}=t;const{rewards:s}=n();return s})),bt=(0,Ce.createSlice)({name:jt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(ft.fulfilled,((e,t)=>{let{payload:n}=t;return n})).addCase(gt.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,Ct="debts",vt=(0,Ce.createAsyncThunk)("debts/initDebt\n  ",(async e=>e)),At=(0,Ce.createAsyncThunk)("debts/upsetDebt",(async e=>{let{address:t,data:n}=e;if(!a.util.isAddress(t))throw new Error("Invalid farm address");if(!n)throw new Error("Data is empty");return{[t]:n}})),Tt=(0,Ce.createAsyncThunk)("debts/getDebts",(async(e,t)=>{let{getState:n}=t;const{debts:s}=n();return s})),St=(0,Ce.createSlice)({name:Ct,initialState:{},reducers:{},extraReducers:e=>{e.addCase(vt.fulfilled,((e,t)=>{let{payload:n}=t;return n})).addCase(At.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer,kt="boosting",Nt=(0,Ce.createAsyncThunk)("boosting/initBoosting\n  ",(async e=>e)),Bt=(0,Ce.createAsyncThunk)("boosting/upsetBoosting",(async e=>{let{address:t,data:n}=e;if(!a.util.isAddress(t))throw new Error("Invalid boosting address");if(!n)throw new Error("Data is empty");return{[t]:n}})),Ft=(0,Ce.createAsyncThunk)("boosting/getBoosts",(async(e,t)=>{let{getState:n}=t;const{boosting:s}=n();return s})),Mt=(0,Ce.createSlice)({name:kt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Nt.fulfilled,((e,t)=>{let{payload:n}=t;return n})).addCase(Bt.fulfilled,((e,t)=>{let{payload:n}=t;Object.assign(e,n)}))}}).reducer;function Rt(e){return(new Date).getTime()/1e3>e.endDate.toNumber()}const Dt=()=>{const e=(0,r.useDispatch)(),t=(0,a.useWalletAddress)();return(0,s.useCallback)((async(n,s)=>{let r=await e(xt()).unwrap();const a=await e(Tt()).unwrap(),i=await e(Ft()).unwrap(),l=await e(wt()).unwrap();let o=Object.keys(r).filter((e=>{const o=r[e];if(!function(e,t){for(const n of Object.values(t))if(n.farm.toBase58()===e)return!0;return!1}(e,l))return!1;if(n&&!function(e,t){for(const n of Object.values(t))if(n.farm.toBase58()===e)return!0;return!1}(e,i))return!1;switch(s){case v.Staked:return function(e,t,n){for(const s of Object.values(n))if(s.authority.toBase58()===t&&s.farm.toBase58()===e)return!s.shares.isZero();return!1}(e,t,a);case v.Your:return function(e,t){return e.authority.toBase58()===t}(r[e],t);case v.Expired:return Rt(o);case v.Upcoming:return function(e){return Date.now()/1e3<e.startDate.toNumber()}(o);case v.All:return!Rt(o);default:return!1}}));const d={};for(const e of o)d[e]=r[e];return d}),[e,t])},zt=()=>{const e=ce();return(0,s.useCallback)((async t=>{const n={};return await Promise.all(Object.keys(t).map((async s=>{const{inputMint:r,totalShares:a}=t[s],i=await e(r.toString(),a);n[s]=i}))),n}),[e])},Et=()=>{const e=(0,r.useDispatch)(),t=zt(),n=(()=>{const e=zt(),t=ce();return(0,s.useCallback)((async(n,s)=>{const r={},a=await e(n);for(const e in n){const{startDate:i,endDate:l}=n[e],o=Object.values(s).filter((t=>t.farm.toBase58()===e));let d=0;const c=l.sub(i);for(const e of o){const{rewardMint:n,totalRewards:s}=e,r=s.mul(new b.BN(86400)).div(c);d+=await t(n,r)}r[e]=d/(a[e]||10)*365}return r}),[e,t])})(),a=(0,s.useCallback)((async(s,r)=>{let a=Object.keys(s);if(r.liquidity!==ve.null){const e=await t(s);a=a.sort(((t,n)=>r.liquidity===ve.ASC?e[n]-e[t]:e[t]-e[n]))}if(r.apr!==ve.null){const t=await e(wt()).unwrap(),i=await n(s,t);a=a.sort(((e,t)=>r.apr===ve.ASC?i[t]-i[e]:i[e]-i[t]))}return a}),[e,n,t]);return a},_t=()=>{const{boostOnly:e,farmTab:t,searchKey:n,sortType:i}=(0,r.useSelector)((e=>e.main)),[o,d]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),m=Et(),h=Dt(),x=(0,s.useCallback)((async()=>{const s=await h(e,t),r=await async function(e,t){if(!t)return e;const n=await a.tokenProvider.find(t),s=new Map;for(const a of n)s.set(a.address,!0);const r={};for(const a in e){const t=e[a];s.has(t.inputMint.toBase58())&&(r[a]=t)}return r}(s,n),l=await m(r,i);return d(l)}),[e,t,n,i,h,m]);return(0,s.useEffect)((()=>{u(!0);const e=setTimeout((async()=>{await x(),setTimeout((()=>{(0,Pe.forceCheck)(),u(!1)}),250)}),300);return()=>clearTimeout(e)}),[x]),(0,p.jsx)(l.Spin,{spinning:c,style:{minHeight:200},children:(0,p.jsx)(l.Row,{gutter:[24,24],children:o.map((e=>(0,p.jsx)(l.Col,{xs:24,lg:12,children:(0,p.jsx)(Pe.default,{height:230.05,children:(0,p.jsx)(ut,{farmAddress:e})})},e)))})})},Pt=()=>{const{pushHistory:e}=Y();return(0,p.jsx)(J,{children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(we,{})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{gutter:[16,16],style:{flexGrow:10},childFlex:1,floatContent:(0,p.jsx)(l.Button,{onClick:()=>e("/create-farm"),ghost:!0,block:!0,children:"New Farm"}),children:(0,p.jsx)(Me,{})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(_e,{})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(_t,{})})]})})},Ot=e=>{let{mintAddress:t,size:n=64,style:s,removeable:r=!1,onRemoveNFT:a}=e;return(0,p.jsxs)("div",{style:{position:"relative"},children:[(0,p.jsx)(l.Card,{style:{borderRadius:8,overflow:"hidden"},bodyStyle:{padding:0},bordered:!1,children:(0,p.jsx)(o.AvatarNFT,{mintAddress:t,style:{width:n,height:n,objectFit:"cover",...s}})}),r&&(0,p.jsx)(l.Button,{type:"text",shape:"circle",style:{position:"absolute",minWidth:16,width:16,height:16,top:-4,right:-4,border:"none",background:"#727272",padding:0},icon:(0,p.jsx)(d.default,{name:"close-outline"}),onClick:()=>a(t)})]})},It=e=>{let{acceptedCollections:t,onSelect:n}=e;const[r,a]=(0,s.useState)(!1);return(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(l.Card,{className:"upload-box card-nft-image-only",bodyStyle:{padding:0},onClick:()=>a(!0),children:(0,p.jsx)(l.Button,{type:"text",className:"icon-add-nft",icon:(0,p.jsx)(d.default,{name:"add-outline",style:{color:"#a0e86f"}})})}),(0,p.jsx)(l.Modal,{visible:r,closeIcon:(0,p.jsx)(d.default,{name:"close-outline"}),onCancel:()=>a(!1),footer:null,className:"modal-nft-selection",style:{paddingBottom:0},children:(0,p.jsxs)(l.Row,{gutter:[24,24],style:{maxHeight:400},children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:4,children:"Select a NFT"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(o.SearchNFT,{onSelect:e=>{a(!1),n(e)},collectionAddress:t})})]})})]})},Ut=e=>{const t=ne(e),n=te(e),r=(0,a.useMintDecimals)({mintAddress:null===n||void 0===n?void 0:n.inputMint.toBase58()}),i=(0,s.useMemo)((()=>t?t.shares.toString():"0"),[t]),l=(0,s.useMemo)((()=>null!==t&&void 0!==t&&t.leverage?t.shares.div(t.leverage).mul(t.leverage.sub(T)):new b.BN(0)),[t]),o=(0,s.useMemo)((()=>n.totalShares.toString()),[n.totalShares]);return(0,s.useMemo)((()=>{const e=new b.BN(i),t=Number(h.utilsBN.undecimalize(e,r||0)),n=Number(h.utilsBN.undecimalize(l,r||0));return{amountBN:e,amount:t,ratio:Number(i)/Number(o),amountStakedNFTs:n}}),[i,r,l,o])},$t=e=>{let{farmAddress:t}=e;const[n,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(),m=ne(t),h=it(t),x=(e=>{const[t,n]=(0,s.useState)(!1),r=ne(e),i=re(e),l=te(e),o=(0,a.useMintDecimals)({mintAddress:null===l||void 0===l?void 0:l.inputMint.toBase58()});return{lock:(0,s.useCallback)((async t=>{try{var s;n(!0);const a=await Z.sol.metaplexNFT.getNftMetadata(t),l=(null===r||void 0===r?void 0:r.shares)||new b.BN(0),d=l.isZero()?new b.BN(0):i.withdraw(l);if(!o)throw new Error("Not find mint decimals");const c=new b.web3.Transaction;if(!r){const{tx:t}=await window.senFarming.initializeDebt({farm:e,sendAndConfirm:!1});c.add(t)}if(!d.isZero()){const{tx:t}=await window.senFarming.unstake({farm:e,sendAndConfirm:!1});c.add(t)}if(!d.isZero()){const{tx:t}=await window.senFarming.withdraw({farm:e,shares:l,sendAndConfirm:!1});c.add(t)}const{tx:u}=await window.senFarming.lock({farm:e,nft:t,metadata:a.pubkey.toBase58(),collection:(null===(s=a.data.collection)||void 0===s?void 0:s.key)||"",sendAndConfirm:!1});if(c.add(u),!d.isZero()){const{tx:t}=await window.senFarming.deposit({farm:e,inAmount:d,sendAndConfirm:!1});c.add(t)}if(!d.isZero()){const{tx:t}=await window.senFarming.stake({farm:e,sendAndConfirm:!1});c.add(t)}const m=window.senFarming.provider,h=await m.sendAndConfirm(c);K("Boosted",h)}catch(a){W(a)}finally{n(!1)}}),[i,r,o,e]),loading:t}})(t),y=(e=>{const[t,n]=(0,s.useState)(!1),r=ne(e),i=te(e),l=re(e),o=(0,a.useMintDecimals)({mintAddress:null===i||void 0===i?void 0:i.inputMint.toBase58()});return{unlock:(0,s.useCallback)((async t=>{try{var s;n(!0);const a=await Z.sol.metaplexNFT.getNftMetadata(t),i=(null===r||void 0===r?void 0:r.shares)||new b.BN(0),d=l.withdraw(i);if(!o)throw new Error("Not find mint decimals");const c=new b.web3.Transaction;if(!r){const{tx:t}=await window.senFarming.initializeDebt({farm:e,sendAndConfirm:!1});c.add(t)}if(!i.isZero()){const{tx:t}=await window.senFarming.unstake({farm:e,sendAndConfirm:!1});c.add(t)}if(!i.isZero()){const{tx:t}=await window.senFarming.withdraw({farm:e,shares:i,sendAndConfirm:!1});c.add(t)}const{tx:u}=await window.senFarming.unlock({farm:e,nft:t,metadata:a.pubkey.toBase58(),collection:(null===(s=a.data.collection)||void 0===s?void 0:s.key)||"",sendAndConfirm:!1});if(c.add(u),!d.isZero()){const{tx:t}=await window.senFarming.deposit({farm:e,inAmount:d,sendAndConfirm:!1});c.add(t)}const{tx:m}=await window.senFarming.stake({farm:e,sendAndConfirm:!1});c.add(m);const h=window.senFarming.provider,p=await h.sendAndConfirm(c);K("Boosted",p)}catch(a){W(a)}finally{n(!1)}}),[l,r,o,e]),loading:t}})(t),j=Ut(t),f=(0,s.useMemo)((()=>h.map((e=>e.boostingCollection.toBase58()))),[h]),g=(0,s.useCallback)((async()=>{if(null===m||void 0===m||!m.leverage||m.leverage.eq(T))return u([]);const e=await window.senFarming.deriveAllPDAs({farm:t}),n=await Z.sol.metaplexNFT.findDataByOwner(e.debtTreasurer.toBase58());return u(n)}),[null===m||void 0===m?void 0:m.leverage,t]),w=e=>{o(e)},C=()=>o("");(0,s.useEffect)((()=>{g()}),[g]);const v=y.loading||x.loading;return(0,p.jsxs)(l.Row,{gutter:[16,16],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{floatContent:!(null===c||void 0===c||!c.length)&&(0,p.jsx)(l.Button,{type:"text",onClick:()=>r(!n),children:n?"Cancel":"Unstake"}),children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Typography.Title,{level:5,children:"Staked NFTs"}),!(null===c||void 0===c||!c.length)&&(0,p.jsx)(at,{children:`+ ${j.amountStakedNFTs} LP`})]})})}),(0,p.jsx)(l.Spin,{spinning:v,children:(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[16,16],children:[null===c||void 0===c?void 0:c.map((e=>(0,p.jsx)(l.Col,{children:(0,p.jsx)(Ot,{mintAddress:e.mint,removeable:n,onRemoveNFT:w})},e.mint))),(0,p.jsx)(l.Col,{children:(0,p.jsx)(It,{acceptedCollections:f,onSelect:x.lock})})]})})}),(0,p.jsx)(l.Modal,{visible:!!i,onCancel:C,footer:!1,closable:!1,children:(0,p.jsxs)(l.Row,{gutter:[16,16],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{align:"baseline",children:[(0,p.jsx)(d.default,{name:"information-circle-outline",style:{fontSize:18,color:"#FA8C16"}}),(0,p.jsxs)(l.Space,{direction:"vertical",children:[(0,p.jsx)(l.Typography.Title,{level:5,children:"Are you sure to Unstake NFTs?"}),(0,p.jsx)(l.Typography.Text,{children:"Your staked LP will be reduced in proportion with the unstake NFTs."})]})]})}),(0,p.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Button,{ghost:!0,onClick:C,children:"Cancel"}),(0,p.jsx)(l.Button,{style:{background:"#FF666E",borderColor:"#FF666E"},type:"primary",loading:y.loading,onClick:async()=>{await y.unlock(i),o("")},children:"Unstake"})]})})]})})]})},Zt=e=>{let{mintAddress:t,size:n=32,style:r}=e;const i=(e=>{const[t,n]=(0,s.useState)(),r=ue(),a=(0,s.useCallback)((async()=>{if(void 0!==t)return;const s=await r(e);n(s)}),[r,e,t]);return(0,s.useEffect)((()=>{a()}),[a]),t||0})(t);return(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(o.MintAvatar,{mintAddress:t,size:n}),(0,p.jsxs)(l.Space,{direction:"vertical",size:0,children:[(0,p.jsx)(l.Typography.Text,{style:{...r},children:(0,p.jsx)(o.MintSymbol,{mintAddress:t})}),(0,p.jsxs)(l.Typography.Text,{type:"secondary",children:["$",a.util.numeric(i).format("0,0.[00]")]})]})]})},Ht=e=>{let{reward:t}=e;return(0,p.jsxs)(l.Space,{direction:"vertical",size:0,style:{textAlign:"right"},children:[(0,p.jsx)(l.Typography.Title,{level:5,children:(0,p.jsx)(y,{mintAddress:t.mint,amount:t.amount,format:"0,0.[00000]"})}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:(0,p.jsx)(Xe,{mintAddress:t.mint,amount:t.amount})})]})},Lt=e=>{let{farmAddress:t}=e;const n=le(t);return(0,p.jsxs)(l.Row,{gutter:[12,12],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{floatContent:(0,p.jsx)(l.Typography.Title,{level:2,children:(0,p.jsx)(Ge,{farmAddress:t})}),children:(0,p.jsx)(l.Typography.Text,{children:"Your rewards"})})}),n.map(((e,t)=>(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{floatContent:(0,p.jsx)(Ht,{reward:e}),children:(0,p.jsx)(Zt,{mintAddress:e.mint,style:{fontSize:16}})})},e.mint+t)))]})},Yt=e=>{let{farmAddress:t}=e;return(0,p.jsx)(l.Card,{style:{borderColor:"#A0E86F",background:"rgba(160, 232, 111, 0.05)"},children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Lt,{farmAddress:t})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(nt,{farmAddress:t})})]})})},qt=e=>{let{label:t,mintAddress:n="",align:s}=e;return(0,p.jsxs)(l.Space,{size:12,direction:"vertical",align:s,children:[(0,p.jsx)(l.Typography.Text,{children:t}),(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(o.MintAvatar,{mintAddress:n}),(0,p.jsx)(l.Typography.Title,{level:5,children:(0,p.jsx)(o.MintSymbol,{mintAddress:n})})]})]})},Kt=e=>{let{label:t,children:n,mintAddress:s="",size:r=8,align:a="start"}=e;return s?(0,p.jsx)(qt,{align:a,label:t,mintAddress:s}):(0,p.jsxs)(l.Space,{align:a,size:r,direction:"vertical",children:[(0,p.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:t}),n]})},Wt=e=>{let{farmAddress:t}=e;const n=(e=>{const[t,n]=(0,s.useState)(0),r=Ut(e),a=te(e),i=ce(),l=(0,s.useCallback)((async()=>{const e=await i(a.inputMint,r.amountBN);return n(e)}),[a.inputMint,i,r.amountBN]);return(0,m.Z)(l,500,[l]),t})(t);return(0,p.jsxs)(l.Typography.Text,{type:"secondary",children:["\u2248 ",a.util.numeric(n).format("$0,0.[00]")]})},Gt=e=>{let{farmAddress:t}=e;const n=Ut(t),{endDate:s,startDate:r,inputMint:i}=te(t),c=it(t),u=new b.BN(Date.now()/1e3);return(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{style:{width:"100%"},direction:"vertical",size:12,children:[(0,p.jsx)(be,{floatContent:(0,p.jsxs)(l.Space,{children:[u.lt(r)&&(0,p.jsxs)(at,{type:"warning",bordered:!1,opacity:.1,radius:8,style:{padding:"1px 8px"},children:[(0,p.jsx)(d.default,{name:"alarm-outline"})," Upcoming"]}),!!c.length&&(0,p.jsx)(at,{type:"primary",bordered:!1,opacity:.1,radius:8,style:{padding:"1px 8px"},children:"\u26a1 Boost"})]}),children:(0,p.jsx)(We,{farmAddress:t,textStyle:{fontSize:30,fontWeight:700},hoverable:!0})}),u.lt(r)?(0,p.jsx)(ot,{label:"Start in",endTime:r.toNumber()}):(0,p.jsx)(ot,{label:"End in",endTime:s.toNumber()})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{justify:"space-between",children:[(0,p.jsx)(l.Col,{children:(0,p.jsx)(Kt,{label:"APR",children:(0,p.jsx)(l.Typography.Title,{style:{color:"#A0E86F"},level:4,children:(0,p.jsx)($e,{farmAddress:t})})})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(Kt,{label:"TVL",children:(0,p.jsx)(l.Typography.Title,{level:4,children:(0,p.jsx)(Ze,{farmAddress:t})})})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Space,{direction:"vertical",size:0,children:(0,p.jsx)(Kt,{label:"You staked",children:(0,p.jsx)(l.Tooltip,{title:(0,p.jsx)(Wt,{farmAddress:t}),arrowPointAtCenter:!0,children:(0,p.jsxs)(l.Space,{size:6,children:[(0,p.jsx)(l.Typography.Title,{level:4,children:a.util.numeric(n.amount).format("0,0.[00]")}),(0,p.jsx)(l.Typography.Title,{level:4,children:(0,p.jsx)(o.MintSymbol,{mintAddress:i.toBase58()})})]})})})})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(Kt,{label:"Your position",children:(0,p.jsx)(l.Typography.Title,{level:4,children:a.util.numeric(n.ratio).format("0,0.[00]%")})})})]})})]})},Vt=e=>{let{farmAddress:t}=e;const n=it(t);return(0,p.jsx)(l.Card,{bordered:!1,style:{height:"100%"},children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Gt,{farmAddress:t})}),(0,p.jsx)(l.Col,{xs:24,md:12,lg:24,xl:12,children:(0,p.jsx)(Yt,{farmAddress:t})}),(0,p.jsx)(l.Col,{xs:24,md:12,lg:24,xl:12,children:(0,p.jsx)(et,{farmAddress:t})}),!!n.length&&(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Divider,{style:{margin:0}})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)($t,{farmAddress:t})})]})]})})},Xt=e=>{let{value:t,max:n,onChange:s=(()=>{})}=e;return(0,p.jsx)(l.InputNumber,{stringMode:!0,decimalSeparator:".",controls:!1,placeholder:"0",bordered:!1,size:"large",style:{padding:0,width:"100%",color:"#C6F1A9",fontSize:24},value:t,onChange:s,max:n,min:"0"})},Jt=e=>{let{mint:t="",value:n,onChange:r,available:i}=e;const{balance:d}=(0,u.$)(t),c=(0,s.useMemo)((()=>i||d),[i,d]);return(0,p.jsx)(l.Card,{bodyStyle:{padding:12},style:{boxShadow:"none",borderRadius:8,background:"#0A0A0A"},bordered:!1,children:(0,p.jsxs)(l.Row,{gutter:[16,16],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{floatContent:(0,p.jsxs)(l.Space,{size:6,children:[(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,p.jsx)(l.Typography.Text,{children:`${a.util.numeric(c).format("0,0.[00]")}`}),(0,p.jsx)(o.MintSymbol,{mintAddress:t})]}),children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{floatContent:(0,p.jsx)(l.Button,{size:"small",type:"text",style:{color:"#C6F1A9"},onClick:()=>r(c.toString()),children:"MAX"}),wrap:!1,children:(0,p.jsx)(Xt,{value:n,onChange:r,max:c.toString()})})})]})})},Qt=e=>{let{farmAddress:t}=e;const[n,r]=(0,s.useState)(""),i=te(t),{stake:d,loading:c}=(e=>{const[t,n]=(0,s.useState)(!1),r=ne(e),i=te(e),l=(0,a.useMintDecimals)({mintAddress:null===i||void 0===i?void 0:i.inputMint.toBase58()});return{stake:(0,s.useCallback)((async t=>{let{inAmount:s,nfts:a}=t;try{if(n(!0),!l)throw new Error("Not find mint decimals");const t=new b.web3.Transaction;if(!r){const{tx:n}=await window.senFarming.initializeDebt({farm:e,sendAndConfirm:!1});t.add(n)}if(null===r||void 0===r||!r.shares.isZero()){const{tx:n}=await window.senFarming.unstake({farm:e,sendAndConfirm:!1});t.add(n)}const a=h.utilsBN.decimalize(s,l),{tx:i}=await window.senFarming.deposit({farm:e,inAmount:a,sendAndConfirm:!1});t.add(i);const{tx:o}=await window.senFarming.stake({farm:e,sendAndConfirm:!1});t.add(o);const d=window.senFarming.provider,c=await d.sendAndConfirm(t);K("Stake",c)}catch(i){W(i)}finally{n(!1)}}),[r,l,e]),loading:t}})(t),u=re(t),m=(0,a.useMintDecimals)({mintAddress:i.inputMint.toBase58()})||0,x=(0,s.useMemo)((()=>{const e=Number(n);return 0===e?0:e}),[n]),y=(0,s.useMemo)((()=>h.utilsBN.undecimalize(u.deposit(h.utilsBN.decimalize(x,m)),m)),[u,m,x]),j=(0,s.useMemo)((()=>Number(y)?a.util.numeric(Number(y)-Number(x)).format("0,0.[000000000000]"):0),[y,x]);return(0,p.jsxs)(l.Row,{gutter:[16,16],style:{height:"100%"},children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Jt,{mint:i.inputMint.toBase58(),value:n,onChange:r})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Card,{bodyStyle:{padding:12},style:{boxShadow:"none",borderRadius:8,background:"#2D2E2D"},bordered:!1,children:(0,p.jsxs)(l.Space,{size:8,direction:"vertical",style:{width:"100%"},children:[(0,p.jsx)(be,{floatContent:(0,p.jsxs)(l.Space,{size:6,children:[(0,p.jsx)(l.Typography.Title,{level:5,children:x||0}),(0,p.jsx)(l.Typography.Title,{level:5,children:(0,p.jsx)(o.MintSymbol,{mintAddress:i.inputMint.toBase58()})})]}),children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Your stake"})}),(0,p.jsx)(be,{floatContent:(0,p.jsxs)(l.Space,{size:6,children:[(0,p.jsxs)(l.Typography.Title,{level:5,children:["+",j]}),(0,p.jsx)(l.Typography.Title,{level:5,children:(0,p.jsx)(o.MintSymbol,{mintAddress:i.inputMint.toBase58()})})]}),children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Boosted by NFT"})}),(0,p.jsx)(be,{floatContent:(0,p.jsxs)(l.Space,{size:6,children:[(0,p.jsx)(l.Typography.Title,{style:{color:"#A0E86F"},level:4,children:`${Number(y)}`}),(0,p.jsx)(l.Typography.Title,{level:5,children:(0,p.jsx)(o.MintSymbol,{mintAddress:i.inputMint.toBase58()})})]}),children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Total"})})]})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Button,{size:"large",type:"primary",block:!0,disabled:!Number(n),loading:c,onClick:async()=>{await d({farm:t,nfts:[],inAmount:Number(n)}),r("")},children:Number(n)?"Stake":"Enter an amount"})})]})},en=e=>{let{farmAddress:t}=e;const[n,r]=(0,s.useState)(""),i=Ut(t),{unstake:o,loading:d}=(e=>{const[t,n]=(0,s.useState)(!1),r=te(e),i=(0,a.useMintDecimals)({mintAddress:null===r||void 0===r?void 0:r.inputMint.toBase58()});return{unstake:(0,s.useCallback)((async t=>{let{amount:s}=t;try{if(n(!0),!i)throw new Error("Not find mint decimals");const t=h.utilsBN.decimalize(s,i),r=new b.web3.Transaction,{tx:a}=await window.senFarming.unstake({farm:e,sendAndConfirm:!1});r.add(a);const{tx:l}=await window.senFarming.withdraw({farm:e,shares:t,sendAndConfirm:!1});r.add(l);const{tx:o}=await window.senFarming.stake({farm:e,sendAndConfirm:!1});r.add(o);const d=window.senFarming.provider,c=await d.sendAndConfirm(r);K("Unstake",c)}catch(r){W(r)}finally{n(!1)}}),[i,e]),loading:t}})(t);return(0,p.jsxs)(l.Row,{gutter:[16,16],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Jt,{available:i.amount,value:n,onChange:r})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Button,{type:"primary",size:"large",block:!0,disabled:!Number(n),loading:d,onClick:async()=>{await o({amount:Number(n)}),r("")},danger:!0,children:"Unstake"})})]})},tn=e=>{let{placeholder:t="E.g. BkLRcJu...",farmAddress:n}=e;const[r,i]=(0,s.useState)(""),{transferOwner:o,loading:c}=(()=>{const[e,t]=(0,s.useState)(!1);return{transferOwner:(0,s.useCallback)((async(e,n)=>{if(a.util.isAddress(e)&&a.util.isAddress(n))try{t(!0);const{txId:s}=await window.senFarming.transferOwnership({farm:e,newOwner:n});K("Transfer",s)}catch(s){W(s)}finally{t(!1)}}),[]),loading:e}})();return(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(d.default,{name:"alert-circle-outline"}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Your current account will lose the farm control when you transfer ownership."})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Card,{bordered:!1,style:{background:"#2D2E2D"},bodyStyle:{padding:16},children:(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Typography.Text,{children:"Transfer to Ownership"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Input,{bordered:!1,value:r,placeholder:t,onChange:e=>i(e.target.value)})})]})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Button,{ghost:!0,onClick:()=>o(n,r),block:!0,loading:c,disabled:!r,children:"Transfer"})})]})},nn={Stake:"Stake",Unstake:"Unstake",Transfer:"Transfer Ownership"},sn=e=>{let{farmAddress:t}=e;const[n,r]=(0,s.useState)(nn.Stake),{authority:i}=te(t),o=(0,a.useWalletAddress)(),d=!a.util.isAddress(o)||o!==i.toBase58();return(0,p.jsx)(l.Card,{bordered:!1,style:{height:"100%"},children:(0,p.jsxs)(l.Row,{gutter:[16,16],style:{height:"100%"},children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Segmented,{value:n,options:Object.keys(nn).filter((e=>"Transfer"!==e||!d)).map((e=>({label:nn[e],value:nn[e]}))),onChange:e=>r(e.toString())})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Tabs,{defaultActiveKey:nn.Stake,activeKey:n,style:{width:"100%",height:"100%"},onChange:r,renderTabBar:()=>(0,p.jsx)(s.Fragment,{}),children:[(0,p.jsx)(l.Tabs.TabPane,{tab:nn.Stake,children:(0,p.jsx)(Qt,{farmAddress:t})},nn.Stake),(0,p.jsx)(l.Tabs.TabPane,{tab:nn.Unstake,children:(0,p.jsx)(en,{farmAddress:t})},nn.Unstake),(0,p.jsx)(l.Tabs.TabPane,{tab:nn.Transfer,disabled:d,children:(0,p.jsx)(tn,{farmAddress:t})},nn.Transfer)]})})]})})},rn=()=>{const{pushHistory:e}=Y();return(0,p.jsx)(l.Row,{justify:"space-between",children:(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Button,{type:"text",icon:(0,p.jsx)(d.default,{name:"arrow-back-outline"}),onClick:()=>{e("/farms")},style:{padding:0,background:"trasparent"},children:"Back"})})})},an=()=>{const{farmAddress:e}=(0,i.useParams)();return(0,p.jsx)(J,{children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(rn,{})}),(0,p.jsx)(l.Col,{xs:24,lg:14,children:(0,p.jsx)(Vt,{farmAddress:e})}),(0,p.jsx)(l.Col,{xs:24,lg:10,children:(0,p.jsx)(sn,{farmAddress:e})})]})})},ln=()=>{const{appRoute:e}=Y();return(0,p.jsxs)(i.Switch,{children:[(0,p.jsx)(i.Route,{exact:!0,path:`${e}/create-farm`,component:X}),(0,p.jsx)(i.Route,{exact:!0,path:`${e}/farms`,component:Pt}),(0,p.jsx)(i.Route,{path:`${e}/:farmAddress`,component:an}),(0,p.jsx)(i.Route,{path:"*",children:(0,p.jsx)(i.Redirect,{to:`${e}/farms`})})]})};var on=n(42224),dn=n(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const cn={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof on.PublicKey||e instanceof Ie()||dn.isBuffer(e)}},un=(0,Ce.configureStore)({middleware:e=>e(cn),devTools:!1,reducer:{main:Fe,farms:yt,debts:St,boosting:Mt,rewards:bt}});var mn=n(68321),hn=n.n(mn),pn=n(73466);const xn={},yn=(0,pn.r)({}),jn=e=>{const{program:t,name:n,filter:r,upset:a,init:i}=e,[l,o]=(0,s.useState)(0),[,d]=yn(),{accountClient:c,connection:u}=(0,s.useMemo)((()=>{var e;const s=null===t||void 0===t||null===(e=t.account)||void 0===e?void 0:e[n];return{accountClient:s,connection:s.provider.connection}}),[n,null===t||void 0===t?void 0:t.account]),m=(0,s.useCallback)((async()=>{if(void 0===xn[n])try{xn[n]=!0,d({...xn,[n]:!0});const e=await c.all(r),t={};for(const n of e)t[n.publicKey.toBase58()]=n.account;await i(t)}catch(e){W(e)}finally{xn[n]=!1,d({...xn,[n]:!1})}}),[c,r,i,n,d]),x=(0,s.useCallback)((async()=>{if(l)return;const e=u.onProgramAccountChange(c.programId,(async e=>{const s=e.accountId.toBase58(),r=e.accountInfo.data,i=t.coder.accounts.decode(n,r);a(s,i)}),"confirmed",[{dataSize:c.size},{memcmp:{offset:0,bytes:(0,h.encodeIxData)((0,h.accountDiscriminator)(n))}},...r]);o(e)}),[c.programId,c.size,u,r,n,t.coder.accounts,a,l]);return(0,s.useEffect)((()=>{m()}),[m]),(0,s.useEffect)((()=>(x(),()=>{(async()=>{l&&await u.removeProgramAccountChangeListener(l)})()})),[u,x,l]),(0,p.jsx)(s.Fragment,{})},fn=()=>(0,p.jsx)("div",{className:"loading-screen",style:{display:"block"},children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,style:{height:256}}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Row,{gutter:[24,24],justify:"center",children:(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Space,{direction:"vertical",align:"center",size:32,children:[(0,p.jsx)(l.Spin,{size:"large"}),(0,p.jsx)(l.Typography.Title,{level:5,children:"Welcome to Sen Farming V2. The application is loading..."})]})})})})]})}),gn=[],wn=()=>{const e=(0,r.useDispatch)(),t=(0,s.useCallback)((t=>e(ht(t))),[e]),n=(0,s.useCallback)(((t,n)=>e(pt({address:t,data:n}))),[e]);return(0,p.jsx)(jn,{program:window.senFarming.program,name:"farm",filter:gn,init:t,upset:n})},bn=()=>{const e=(0,r.useDispatch)(),t=(0,a.useWalletAddress)(),n=(0,s.useCallback)((t=>e(vt(t))),[e]),i=(0,s.useCallback)(((t,n)=>e(At({address:t,data:n}))),[e]),l=(0,s.useMemo)((()=>[{memcmp:{bytes:(0,h.encodeIxData)(new b.web3.PublicKey(t).toBuffer()),offset:40}}]),[t]);return(0,p.jsx)(jn,{program:window.senFarming.program,name:"debt",filter:l,init:n,upset:i})},Cn=[],vn=()=>{const e=(0,r.useDispatch)(),t=(0,s.useCallback)((t=>e(Nt(t))),[e]),n=(0,s.useCallback)(((t,n)=>e(Bt({address:t,data:n}))),[e]);return(0,p.jsx)(jn,{program:window.senFarming.program,name:"farmBoostingCollection",filter:Cn,init:t,upset:n})},An=[],Tn=()=>{const e=(0,r.useDispatch)(),t=(0,s.useCallback)((t=>e(ft(t))),[e]),n=(0,s.useCallback)(((t,n)=>e(gt({address:t,data:n}))),[e]);return(0,p.jsx)(jn,{program:window.senFarming.program,name:"farmRewardMint",filter:An,init:t,upset:n})},Sn=e=>{let{children:t}=e;const[n]=yn(),r=(0,s.useMemo)((()=>!Object.values(n).length||Object.values(n).includes(!0)),[n]);return(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(wn,{}),(0,p.jsx)(bn,{}),(0,p.jsx)(vn,{}),(0,p.jsx)(Tn,{}),r?(0,p.jsx)(fn,{}):t]})},{sol:{senFarmingProgram:kn}}=Z,Nn=e=>{let{children:t}=e;const n=(0,a.useWalletAddress)(),[r,i]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(r)return;const e=(0,h.getAnchorProvider)(a.rpc,n,window.sentre.wallet),t=new(hn())(e,kn);window.senFarming=t,i(!0)}),[n,r]),r?(0,p.jsx)(Sn,{children:t}):null};var Bn=n(45597);const{manifest:{appId:Fn}}=Z,Mn=(0,s.memo)((()=>(0,p.jsx)(r.Provider,{store:un,children:(0,p.jsx)(Nn,{children:(0,p.jsx)(ln,{})})}))),Rn=()=>{const{setBackground:e}=(0,a.useUI)();return(0,s.useEffect)((()=>{e({light:"#141413",dark:"#141413"})}),[e]),(0,p.jsx)(Mn,{})},Dn=()=>(0,p.jsx)(a.UIProvider,{appId:Fn,antd:{prefixCls:Fn},style:{paddingBottom:24},children:(0,p.jsx)(Rn,{})})},83272:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/README.dd3222bdab290f263138.md"},70854:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/panel.6ce7bc345912340df001.png"},43094:()=>{},69159:()=>{},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},89408:()=>{},47956:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-49b12f.39c4719b.chunk.js.map